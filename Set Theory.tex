% Copyright (C) He Guanyuming 2020
% The file is licensed under the MIT license.

\chapter{Set Theory}
Before I start, I would like to write an honest opinion of mine: many definitions and axioms of the set theory involve the encapsulation and manipulation of basic logic constructs: $\forall, \exists, \wedge, \vee, \to, \dots$

As a result, the proofs in this chapter will also include rely on them heavily.

Some additional notes:
\begin{enumerate}
	\item $p \leftrightarrow q$ is defined as $p \to q \wedge p \leftarrow q$.
\end{enumerate}

\section{Fundamentals}
\begin{why}{29}\label{why.unique.empty.set}
If $\emptyset$ and $\emptyset'$ are both empty sets, then they are equal.
\end{why}
\begin{proof}
	Observe that 
	\[
	\forall x (x \in \emptyset \leftrightarrow x \in \emptyset')
	\]
	because in either direction the statement is vacuously true.
\end{proof}

\begin{why}{30}\label{why.eq.singleton.sets}
	Let $A = \{a\}, A' = \{a\}$, then $A = A'$.
\end{why}
\begin{proof}
	Let $x$ by any object. By the property of $=$, we have exclusively either $x=a$ or $x \ne a$.
	
	\begin{itemize}
		\item If $x = a$, then $x \in A \leftrightarrow x \in A'$ is true.
		\item If $x \ne a$, then $x \in A \leftrightarrow x \in A'$ is vacuously true.		
	\end{itemize}

	Therefore, $x \in A \leftrightarrow x \in A'$ is always true. By the definition of set equality, $A = A'$.
\end{proof}

\begin{why}{30}\label{why.eq.pair.sets}
	Let $A = \{a,b\}, A' = \{b,a\}$, then $A = A'$.
\end{why}
\begin{proof}
	Let $x$ by any object. $x = a \vee x = b$ is a statement, so it is either exclusively true or false.
	
	\begin{itemize}
		\item If $x = a \vee x = b$ is true, then $x \in A \leftrightarrow x \in A'$ is true.
		\item If $x = a \vee x = b$ is not true, then $x \in A \leftrightarrow x \in A'$ is vacuously true.		
	\end{itemize}
	
	Therefore, $x \in A \leftrightarrow x \in A'$ is always true. By the definition of set equality, $A = A'$.
\end{proof}

\begin{why}{30}
	Let $A = \{a\}, A' = \{a,a\}$, then $A = A'$.
\end{why}
\begin{proof}
	Observe that $x \in A'$ iff $x = a$. Then, apply the proof of $\{a\} = \{a\}$ here.
\end{proof}

\begin{exercise}{3.1.1}
	Let $a,b,c,d$ be objects such that $\{a,b\} = \{c,d\}$, then at least one of
	\begin{enumerate}
		\item $a = c \wedge b = d$
		\item $a = d \wedge b = c$
	\end{enumerate}
	is true.
\end{exercise}
\begin{proof}
	I tried going straight to show all possibilities, but that yielded too many cases.
	
	Therefore, I prove by contradiction. Suppose for the sake of contradiction that neither of the two statements is true. In particular, $a \ne c \wedge a \ne d$.
	
	Then, we must have $\{a,b\} \ne \{c,d\}$, because $a \in \{a,b\}$ but $a \notin \{c, d\}$, which means $a \in \{a,b\} \to a \in \{c,d\}$ is false. This gives a contradiction.
\end{proof}

\begin{exercise}{3.1.2}
	$\emptyset, \{\emptyset\}, \{\{\emptyset\}\}$, and $\{\emptyset,\{\emptyset\}\}$ are all distinct.
\end{exercise}
\begin{proof}
	First, because all except $\emptyset$ contain some element, they are all non-empty, by Axiom 3.2 and 3.3.
	
	Now, we show that $\{\emptyset\}, \{\{\emptyset\}\}$, and $\{\emptyset,\{\emptyset\}\}$ are distinct. 
	
	Observe that $\{\emptyset\} \notin \{\emptyset\}$, but it is in both $\{\{\emptyset\}\}$, and $\{\emptyset,\{\emptyset\}\}$. Therefore, $\{\emptyset\}$ is distinct from the rest two.
	
	Now, we only need to show that $\{\{\emptyset\}\} \ne \{\emptyset,\{\emptyset\}\}$. This is done by noticing that $\emptyset$ is in the latter, but not in the former.
\end{proof}

\begin{why}{30}
	Let $A,B,A'$ be sets. If $A = A'$, then $A \cup B = A' = B$.
\end{why}
\begin{proof}\leavevmode
	\begin{enumerate}
		\item Let $x$ be any element in $A \cup B$. According to Axiom 3.5, $x \in A \vee x \in B$. 
		\begin{enumerate}
			\item If $x \in A$, then by Axiom 3.2, $x \in A'$, then $x \in A' \vee x \in B$, which, according to Axiom 3.5 again, means $x \in A' \cup B$. 
			\item If $x \in B$, then $x \in A' \vee x \in B$, which, according to Axiom 3.5 again, means $x \in A' \cup B$.
		\end{enumerate}
		
		\item Let $x$ be any element in $A' \cup B$. According to Axiom 3.5, $x \in A' \vee x \in B$. 
		\begin{enumerate}
			\item If $x \in A'$, then by Axiom 3.2, $x \in A$, then $x \in A \vee x \in B$, which, according to Axiom 3.5 again, means $x \in A \cup B$. 
			\item If $x \in B$, then $x \in A \vee x \in B$, which, according to Axiom 3.5 again, means $x \in A \cup B$.
		\end{enumerate}
	\end{enumerate}
\end{proof}

\begin{exercise}{3.1.3}
\begin{enumerate}
	\item $A \cup B = B \cup A$.
	\item $\{a,b\} = \{a\} \cup \{b\}$
\end{enumerate}
\end{exercise}
\begin{proof}\leavevmode
	\begin{enumerate}
		\item This follows from the commutativity of logical or.
		\item By Axiom 3.4, $x \in \{a,b\}$ iff $x = a$ or $x = b$. By Axiom 3.5, $x \in \{a\} \cup \{b\}$ iff $x \in \{a\}$ or $x \in \{b\}$.
		
		However, by Axiom 3.4 again, $x \in \{a\}$ iff $x = a$; $x \in \{b\}$ iff $x = b$. Hence, the two logical statements are equivalent.
	\end{enumerate}
\end{proof}

\begin{why}{32}
	For any set $A$,
	\begin{itemize}
		\item $A \subseteq A$.
		\item $\emptyset \subseteq A$.
	\end{itemize}
\end{why}
\begin{proof}\leavevmode
	\begin{itemize}
		\item For all $x$, $x \in A \to x \in A$ is true.
		\item For all $x$, $x \in \emptyset \to x \in A$ is vacuously true.
	\end{itemize}
\end{proof}

\begin{exercise}{3.1.4}
	\begin{enumerate}
		\item {\bf Antisymmetry.} If $A \subseteq B$ and $B \subseteq A$, then $A = B$. 
		\item If $A \subsetneq B$ and $B \subsetneq C$, then $A \subsetneq C$.
	\end{enumerate}
\end{exercise}
\begin{proof}\leavevmode
	\begin{enumerate}
		\item $A \subseteq B$ means that every element in $A$ is an element in $B$; $B \subseteq A$ means vice versa. Combining the two, we have the definition of $A = B$.		
		\item Prof.~Tao already showed that $A \subseteq C$. Now we only need to show that $A \ne C$. 
		
		Because $A \subsetneq B$, $A \ne B$. Hence, there exists such an element $x$ that is not in both. However, as everyone in $A$ is in $B$, we can only have $x \in B \wedge x \notin A$.
		
		Because $B \subseteq C$, we must also have $x \in C$. Therefore, $A \ne C$, as $x \in A$.
	\end{enumerate}
\end{proof}

\begin{why}{33}
	$\{x \in A : P(x)\} \subseteq A$.
\end{why}
\begin{proof}
	By Axiom 3.6, for any $y \in \{x \in A : P(x)\}$, we have $y \in A$.
\end{proof}
\begin{why}{33}
	If $A = A'$, then $\{x \in A : P(x)\} = \{x \in A' : P(x)\}$.
\end{why}
\begin{proof}
	By Axiom 3.6,
	\begin{enumerate}
		\item For any $y \in \{x \in A : P(x)\}$, $y \in A \wedge P(y)$. 
		
		Because $A = A'$, $y \in A' \wedge P(y)$. By Axiom 3.6 again, $y \in \{x \in A' : P(x)\}$.
		\item For any $y \in \{x \in A' : P(x)\}$, $y \in A' \wedge P(y)$. 
		
		Because $A = A'$, $y \in A \wedge P(y)$. By Axiom 3.6 again, $y \in \{x \in A : P(x)\}$.
	\end{enumerate}
\end{proof}

\begin{why}{34}
	$\emptyset$ and $\emptyset$ are disjoint, but not distinct.
\end{why}
\begin{proof}\leavevmode
	\begin{itemize}
		\item They are disjoint, because no element $x$ can satisfy $x \in \emptyset \wedge x \in \emptyset$.
		\item They are not distinct, because we showed earlier that any empty set is the same as $\emptyset$.
	\end{itemize}
\end{proof}

\begin{exercise}{3.1.5}
These are logically equivalent:
\begin{enumerate}
	\item $A \subseteq B$.
	\item $A \cup B = B$.
	\item $A \cap B = A$.
\end{enumerate}
\end{exercise}
\begin{proof}\leavevmode
	\begin{enumerate}
		\item If $A \subseteq B$, then
		\begin{enumerate}
			\item For every $x \in B$, by Axiom 3.5, $x \in A \cup B$. For every $y \in A \cup B$, by Axiom 3.5, $y$ in $A$ or $B$. But when $y \in A$, $y$ also $\in B$, as $A \subseteq B$. 
			
			Hence, $A \cup B = B$.
			\item For every $x \in A \cap B$, by definition, $x \in A$ and $B$, then $x \in A$. For every $y \in A$, by the definition of subsets, $y \in B$. Hence $y \in A \wedge y \in B$, and $y \in A \cap B$ follows. 
			
			Therefore, $A \cap B = A$.
		\end{enumerate}
	
		\item If $A \cup B = B$, then
		\begin{enumerate}
			\item For every $x \in A$, by Axiom 3.5, $x \in A \cup B$. By hypothesis, $x \in B$. 
			
			By the definition of subsets, $A \subseteq B$.
			
			\item For every $x \in A \cap B$, by definition, $x \in A$. For every $y \in A$, by Axiom 3.5, $y \in A \cup B$. By hypothesis, $y \in B$. Hence $y \in A \wedge y \in B$.
			
			Therefore, $A \cap B = A$.
		\end{enumerate}
	
		\item If $A \cap B = A$, then
		\begin{enumerate}
			\item For every $x \in A$, by hypothesis, $x \in A \cap B$. By the definition of intersection, $x \in B$. 
			
			By the definition of subsets, $A \subseteq B$.
			
			\item For every $x \in A \cup B$, by axiom 3.5, $x \in A$ or $B$. If $x \in A$, then by hypothesis, $x \in A \cap B$, and by the definition of intersection, $x \in B$. If $x \in B$, then $x \in B$.
			
			For every $y \in B$, by Axiom 3.5, $y \in A \cup B$.
			
			Therefore, $A \cup B = B$.
		\end{enumerate}
	\end{enumerate}
\end{proof}

\begin{exercise}{3.1.6}
	Let $A,B,C,X$ be any sets that $A,B,C \subseteq X$, then:
	\begin{enumabc}
		\item $A \cup \emptyset = A$, and $A \cap \emptyset = \emptyset$.
		\item $A \cup X = X$, and $A \cap X = A$.
		\item $A \cap A = A = A \cup A$.
		\item $A \cap B = B \cap A$, and $A \cup B = B \cup A$.
		\item $(A \cup B) \cup C = A \cup (B \cup C)$, and $(A \cap B) \cap C = A \cap (B \cap C)$.
		\item $A \cup (B \cap C) = (A \cup B) \cap (A \cup C)$, and $A \cap (B \cup C) = (A \cap B) \cup (A \cap C)$.
		\item $A \cup (X \setminus A) = X$, and $A \cap (X \setminus A) = \emptyset$. 
		\item $X \setminus (A \cup B) = (X \setminus A) \cap (X \setminus B)$, and $X \setminus (A \cap B) = (X \setminus A) \cup (X \setminus B)$.
	\end{enumabc}
\end{exercise}
\begin{proof}
	We might see that these properties of sets have a clear correspondence with some facts about logical statements, since many concepts in set theory are defined using logical primitives:
	\begin{enumabc}
		\item $p \vee \false \equiv p$, and $p \wedge \false \equiv \false$.
		
		\item $p \vee \true \equiv \true$, and $p \wedge \true \equiv p$.
		
		\item $p \wedge p \equiv p \equiv p \vee p$.
		
		\item $p \wedge q \equiv q \wedge p$, and $p \vee q \equiv q \vee p$.
		
		\item $(p \wedge q) \wedge r \equiv p \wedge (q \wedge r)$, and $(p \vee q) \vee r \equiv p \vee (q \vee r)$
		
		\item $p \wedge (q \vee r) \equiv (p \wedge q) \vee (p \wedge r)$, and $p \vee (q \wedge r) \equiv (p \vee q) \wedge (p \vee r)$.
		
		We see that the facts start getting not obvious. To prove them, one can use truth tables, but I will omit that here. In fact, the process of using truth tables, formally, corresponds to the way that we divide and conquer different situations to prove the corresponding statements about sets. The former approach just seems more systematic.
		
		For example, if we consider $x \in A$, we are also considering $p = \true$ and the lines in the truth table.
		
		\item $p \vee (\neg p) \equiv \true$, and $p \wedge (\neg p) \equiv \false$.
		
		\item $\neg(p \vee q) \equiv \neg p \wedge \neg q$, and $\neg (p \wedge q) \equiv \neg p \vee \neg q$.
	\end{enumabc}

	We will use these facts about logical statements to prove the proposition.
	\begin{enumabc}
		\item Given any $x$, let $p := x \in A$, and we have $\false \equiv x \in \emptyset$. We give an example of how to prove the statement and everything below is done similarly.
		
		For example, to prove $A \cup \emptyset = A$, we need to show that
		\[
			\forall x(x \in A \cup \emptyset \leftrightarrow x \in A)
		\]
		, which is, by Axiom 3.5,
		\[
			\forall x((x \in A \vee x \in \emptyset) \leftrightarrow x \in A)
		\]
		Substitute $p$ and $\false$ in, we have
		\[
			\forall x((p \vee \false) \leftrightarrow p)
		\]
		Which immediately follows from $p \vee \false \equiv p$.
		
		\item Given any $x$, 
		\begin{enumerate}
			\item If $x \in X$, then let $p := x \in A$, and $\true \equiv x \in X$.
			\item If $x \notin X$, then $x \in A \equiv x \in X \equiv \false$, and the two implication statements between them are all vacuously true.
		\end{enumerate}
	
		\item Given any $x$, let $p := x \in A$.
		
		\item Given any $x$, let $p := x \in A;\ q := x \in B$.
		
		\item Given any $x$, let $p := x \in A;\ q := x \in B;\ r := x \in C$.
		
		\item Given any $x$, let $p := x \in A;\ q := x \in B;\ r := x \in C$.
		
		\item There are two situations.
		\begin{enumerate}
			\item If $x \notin X$, then $x \in X \setminus \text{anything}$ is false, by the definition of the difference of sets. Therefore, all implication statements are vacuously true.
			
			\item If $x \in X$, then $x \in X \equiv \true; x \in \emptyset \equiv \false$. 
			
			In addition, for subset $A \subseteq X$, let $p := x \in A$. By definition of the difference of sets, $\neg p \equiv x \in X \setminus A$.
		\end{enumerate}
	
			\item There are two situations.
			\begin{enumerate}
				\item If $x \notin X$, then $x \in X \setminus \text{anything}$ is false, by the definition of the difference of sets. Therefore, all implication statements are vacuously true.
				
				\item If $x \in X$, then, let $p := x \in A$; $q := x \in B$. By the definition of the difference of sets, $\neg p \equiv x \in X \setminus A$; $\neg q \equiv x \in X \setminus B$.
			\end{enumerate}
	\end{enumabc}
\end{proof}

\begin{why}{35}
	Let $A = \{3,5,9\}$. Let $P(x,y)$ be $y = \successor{x}$. Then, $\{x:P(x,y)\ \text{for some}\ x \in A\} = \{4,6,10\}$.
\end{why}
\begin{proof}
	Clearly, $4,6,10$ are some $y$'s that satisfy $P(x,y)$ for some $x \in A$. Namely, $P(3,4), P(5,6), P(9,10)$ are true.
	
	Now we show that they are the only elements in $\{x:P(x,y)\ \text{for some}\ x \in A\}$. Let $e \in \{x:P(x,y)\ \text{for some}\ x \in A\}$, then, by Axiom 3.7, there exists $x \in A$ such that $P(x,e)$. $x$ can only be one of $3,5,9$, and because $P(x,y)$ is true for at most one $y$ for a $x$, we see that $4,6,10$ are the only possible numbers.
\end{proof}

\begin{why}{36}
	These two sets are exactly the same:
	\[
	\{8-n: n \in \setn, 0 \le n \le 5\}, \quad \{8-m: m \in \setn, 0 \le m \le 5\}
	\]
\end{why}
\begin{proof}
	We have used the Axiom of specification (first), and the Axiom of replacement (second) to create the two sets. In the progress, we see that $m$ and $n$ are merely placeholders for an element in $\setn$. So they are really irrelevant to the result.
\end{proof}

\begin{exercise}{3.1.7}
	\begin{enumerate}
		\item $A \cap B \subseteq A$ and $A \cap B \subseteq B$.
		\item $C \subseteq A \wedge C \subseteq B$ iff $C \subseteq A \cap B$.
		\item $A \subseteq A \cup B$ and $B \subseteq A \cup B$.
		\item $A \subseteq C \wedge B \subseteq C$ iff $A \cup B \subseteq C$.
	\end{enumerate}
\end{exercise}
\begin{proof}\leavevmode
	\begin{enumerate}
		\item Let $x$ by any object. If $x \in A \cap B$, then by definition $x \in A$ and $x \in B$. Hence, $A \cap B$ is a subset of both $A$ and $B$.
		
		\item If $C \subseteq A,B$, then for any element $x \in C$, $x \in A$ and $x \in B$, which by definition gives $x \in A \cap B$.
		
		If $C \subseteq A \cap B$, then for any element $x \in C$, $x \in A \cap B$. By definition, $x \in A$ and $x \in B$. $x \in A$ gives $C \subseteq A$, and $x \in B$ gives $C \subseteq B$.
		
		\item If $x \in A$, then $x \in A \vee x \in B$ is true. Then, $A \subseteq A \cup B$. Similarly, $B \subseteq A \cup B$.
		
		\item If $A,B \subseteq C$, then for any element $x \in A \cup B$, we have $x \in C$ either way.
		
		If $A \cup B \subseteq C$, then for any element $x \in A$, by the last item, $x \in A \cup B$. By the definition of subsets, $x \in C$. Similarly, $x \in B \to x \in C$.
	\end{enumerate}
\end{proof}

\begin{exercise}{3.1.8}
	\begin{enumerate}
		\item $A = A \cap (A \cup B)$.
		\item $A = A \cup (A \cap B)$.
	\end{enumerate}
\end{exercise}
\begin{proof}\leavevmode
	\begin{enumerate}
		\item Let $x \in A \cap (A \cup B)$. By definition, $x \in A$. 
		
		Let $x \in A$. By \exerciseref{3.1.7}, $x \in A \cup B$. Because we have both, by the definition of intersection, we have $x \in A \cap (A \cup B)$.
		
		\item Let $x \in A \cup (A \cap B)$. By definition, $x \in A \vee x \in (A \cap B)$. Therefore, if $x \notin A$, then $x$ must be in $A \cap B$, which shows that $x$ still $\in A$, a contradiction.
		
		Let $x \in A$, then by Axiom 3.5, $x \in A \cup (A \cap B)$. 
	\end{enumerate}
\end{proof}

\begin{exercise}{3.1.9}
	If $A \cup B = X$ and $A \cap B = \emptyset$, then
	\begin{enumerate}
		\item $A = X \setminus B$,
		\item and $B = X \setminus A$.
	\end{enumerate}
\end{exercise}
\begin{proof}\leavevmode
	\begin{enumerate}
		\item If $x \in A$, then $x \in A \cup B$, by Axiom 3.5. Then, $x \in X$. But $x \notin B$, because $A \cap B = \emptyset$ (so everyone in $A$ is not in $B$). Hence, $x \in X \setminus B$.
		
		If $x \in X \setminus B$, then $x \in X$, so $x \in A \cup B$, so $x \in A \vee X \in B$. But $x \notin B$ by the difference, then $x$ can only be in $A$.
		
		\item Using the commutativity of $\cap$ and $\cup$, the proof follows similarly.
	\end{enumerate}
\end{proof}

\begin{exercise}{3.1.10}
	\begin{enumerate}
		\item $A\setminus B$, $A\cap B$, and $B \setminus A$ are disjoint.
		\item The union of the three equals $A \cup B$.
	\end{enumerate}
\end{exercise}
\begin{proof}\leavevmode
	\begin{enumerate}
		\item If $x \in A \cap B$, then $x \in A \wedge x \in B$. This means, by definition, $x$ cannot be in any of the two differences between $A$ and $B$.
		
		If $x \in A \setminus B$, then $x \notin B$. But for $x$ to be in $B \setminus A$, $x$ must be in $B$. Hence, the two differences are also disjoint.
		
		\item Let $x \in A \cup B$. Consider $p := x \in A;\ q := x \in B$. Then,
		\begin{enumerate}
			\item If $p = \true, q = \true$, then $x \in A \cap B$, and is in the union of the three.
			\item If $p = \true, q = \false$, then $x \in A \setminus B$, and is in the union of the three.
			\item If $p = \false, q = \true$, then $x \in B \setminus A$, and is in the union of the three.
			\item If $p = \false, q = \false$, then it is a contradiction to our premise $x \in A \cup B$.
		\end{enumerate}
	
		Let $x$ be in the union of the three.
		\begin{enumerate}
			\item If $x \in A \setminus B$, then $x \in A$, then $x \in A \cup B$.
			\item If $x \in B \setminus A$, then $x \in B$, then $x \in A \cup B$.
			\item If $x \in A \cap B$, then $x \in A$, then $x \in A \cup B$.
		\end{enumerate}
	\end{enumerate}
\end{proof}

\begin{exercise}{3.1.11}
	The axiom of replacement implies the axiom of specification.
\end{exercise}
\begin{proof}
	Let $X$ be a set. Let $Q(x)$ be a property pertaining to any $x \in X$.
	
	Define $P(x,y)$ pertaining to any $x \in X$ and any $y$, such that
	\begin{enumerate}
		\item If $Q(x)$ is true, then $P(x,x)$ is true; and $P(x,y)$ is false for all $y \ne x$.
		\item If $Q(x)$ is false, then $P(x,y)$ is false for all $y$. In particular, $P(x,x)$ is false.
	\end{enumerate}

	Using the axiom of replacement, we see that the set $\{y: x \in X, P(x,y)\}$ exists.

	Now we show that it would be equal to what would be created by the axiom of specification, $\{x \in X: Q(x)\}$.
	\begin{enumerate}
		\item If $y \in \{y: x \in X, P(x,y)\}$, then by the axiom of replacement, there exists some $x \in X$ such that $P(x,y)$. If $Q(x)$, then we must have $x = y$. If $\neg Q(x)$, then a contradiction. Hence, $y = x$ for some $x \in X \wedge Q(x)$, which means $y \in \{x \in X: Q(x)\}$.
		
		\item If $y \in \{x \in X: Q(x)\}$, then $y \in X \wedge Q(y)$. By the definition of $P$, $P(y,y)$ is true, and $P(y,x)$ is false for all $x \ne y$. By the axiom of replacement, $y \in \{y: x \in X, P(x,y)\}$.
	\end{enumerate}
\end{proof}

\begin{exercise}{3.1.12}
	Suppose $A,B,A',B'$ are such sets that $A' \subseteq A, B' \subseteq B$. Then,
	\begin{enumerate}
		\item $A' \cup B' \subseteq A \cup B$. $A' \cap B' \subseteq A \cap B$.
		\item Show, using a counterexample, that $A' \setminus B' \subseteq A \setminus B$ is not the case. In addition, can you find a modification of this statement involving the set difference operation $\setminus$ that is true given the stated hypotheses? Justify your answer.
	\end{enumerate}
\end{exercise}
\begin{proof}\leavevmode
	\begin{enumerate}
		\item Let $x$ be any object. Let $p := x \in A,\ q := x \in B,\ p' := x \in A',\ q' := x \in B'$. Then, by the definition of subsets, we have $p' \to p$ and $q' \to q$.
		
		Hence, what we need to prove are immediate consequence of
		\[
		p' \vee q' \to p \vee q, \quad p' \wedge q' \to p \wedge q
		\]
		
		\item Let $A = \{1,2,3\}, B = \{2,3,4\}, A' = \{1,2\}, B' = \{3\}$. Then, $A \setminus B = \{1\}$, but $A' \setminus B' = \{1,2\}$.
		
		I discovered a good way to find a statement that works. Consider again the four statements $p,q,p',q'$ using the above definition. Then $A \setminus B$ and $A' \setminus B'$ correspond to, respectively,
		\[
		p \wedge \neg q,\ \text{and}\ p' \wedge \neg q'
		\]
		
		The problem here is, while $q' \to q$, it is not the case that $\neg q' \to \neg q$. So from $p' \wedge \neg q'$ we cannot imply $p \wedge \neg q$. (And neither can we imply the other way!)
		
		However, we do have $\neg p \to \neg p'$ and $\neg q \to \neg q'$. Therefore, to make an implication, we will have to swap one statement with another: now consider
		\[
		p \wedge \neg q',\ \text{and}\ p' \wedge \neg q
		\]
		Because $p' \to p$ and $\neg q \to \neg q'$, we have the latter implying the former. Hence, I propose
		\[
		A' \setminus B \subseteq A \setminus B'
		\]
		, whose proof follows the above reasoning.
	\end{enumerate}
\end{proof}

\begin{exercise}{3.1.13}
	A set $A$ does not have any non-empty proper subset iff $A$ is a singleton set.
\end{exercise}
\begin{proof}
	\myifbox Suppose $A$ is a singleton set $\{x\}$. Let $B$ be a proper subset of $A$. Suppose for the sake of contradiction that $B$ is non-empty, that is, $\exists y \in B$. Then, by the definition of subsets, $y \in A$. Because $A$ is a singleton, we have $y = x$.
	
	This means that $x \in B$, or, in other words, $\{x\} \subseteq B$. Hence, we have $B \subseteq A \wedge A \subseteq B$, and it follows that $A = B$, a contradiction.
	
	\myoifbox Suppose that all proper subsets of $A$ are empty. By Why~\ref{why.unique.empty.set}, they are the same set: $\emptyset$. Because $\emptyset$ is a proper subset of $A$, we know that $A$ is non-empty.
	
	Hence, there exists some $x \in A$. We show that it is the only element in $A$. Actually, we have $\{x\} \subseteq A$. But $\{x\}$ cannot be a proper subset, as it is non-empty. Therefore, we must have $\{x\} = A$, as desired.
\end{proof}

\section{Russell's paradox}

\begin{exercise}{3.2.1}
	If we assumed the Axiom of universal specification, then we could have all the axioms 3.3--3.8, (for 3.8, assuming all natural numbers are objects).
\end{exercise}
\begin{proof}
\fbox{\em Axiom 3.3: The empty set.} To prove the existence of the empty set, simply choose a property that is false for all objects.

\fbox{\em Axiom 3.4: Singleton and pair sets.} Choose a property $P(x)$ that is true iff $x = a$ for the singleton set $\{a\}$, and iff $x = a \vee x = b$, for the pair set $\{a,b\}$.

\fbox{\em Axiom 3.5: Union sets.} Let $P(x) := x \in A \vee x \in B$ for $A \cup B$.

\fbox{\em Axiom 3.6: Specification.} Let the property be $P(x):= x \in A \wedge Q(x)$, for $\{x \in A : Q(x)\}$.

\fbox{\em Axiom 3.7: Replacement.} Let the property be $P(y):= \exists x(x \in A \wedge Q(x,y))$, for $\{y: x \in A: Q(x,y)\}$.

\fbox{\em Axiom 3.8: Infinity.} Let the property be $P(n):= (n \text{ is a natural number})$.
\end{proof}

\begin{exercise}{3.2.2}
	Let $A,B$ be sets. Then, (with the axiom of regularity)
	\begin{enumerate}
		\item $A \notin A$.
		\item Either $A \notin B$, or $B \notin A$.
	\end{enumerate}
\end{exercise}
\begin{proof}\leavevmode
	\begin{enumerate}
		\item Suppose for the sake of contradiction that $A \in A$ for some set $A$. This means that the set $\{A\} \subseteq A$. Now consider the set $\{A\}$.
		
		According to the axiom of regularity, its only element, is either not a set (excluded), or is disjoint from it, that is, $A \cap \{A\} = \emptyset$. But this is a contradiction, because we already have $\{A\} \subseteq A$, so there is some element (namely, $A$), that is contained in both $\{A\}$ and $A$.
		
		\item Suppose for the sake of contradiction that there exist such sets $A,B$ that $A \in B$ and $B \in A$. Now, we consider, somewhat similarly, the pair set $\{A,B\}$.
		
		Obviously, both elements in $\{A,B\}$ are sets. So one of them has to be disjoint from it. However,
		\begin{enumerate}
			\item $B \in A \cap \{A,B\}$
			\item $A \in B \cap \{A,B\}$ 	
		\end{enumerate}
		, a contradiction with the axiom of regularity.
	\end{enumerate}
\end{proof}

\begin{exercise}{3.2.3}
	(Assuming the other axioms of the set theory.) The axiom of universal specification is equivalent to the existence of a universal set $\Omega$ that contains all objects.
\end{exercise}
\begin{proof}
	\myifbox If there exists such a set as $\Omega$, then for any property $P(x)$ pertaining to all objects $x$, we can construct the set for the axiom of universal specification using $\Omega$ and the axiom of specification.
	
	\myoifbox If the axiom of universal specification is assumed, then we can simply choose a property $P(x)$ which is true for all objects to have $\Omega$.
\end{proof}

\section{Functions}
\begin{why}{42}
	If $x'=x$, then $f(x')=f(x)$.
\end{why}
\begin{proof}
	The reason is, the property $P(x,y)$ obeys the axiom of substitution, and for the same $x$, the $y$ is unique.
\end{proof}

\begin{why}{43} \label{why.empty.func.is.unique}
	For the same set $X$, all functions from $\emptyset$ to $X$ are equal.
\end{why}
\begin{proof}\leavevmode
	\begin{enumerate}
		\item The domains and codomains obviously match.
		\item $\forall x(x \in \emptyset \to (f(x) = f'(x)))$ is vacuously true.
	\end{enumerate}
\end{proof}

\begin{exercise}{3.3.1}
	\begin{enumerate}
		\item The equality of functions is reflexive, symmetric, and transitive.
		\item Let $f = \tilde{f}, g = \tilde{g}$ be functions. And $f,\tilde{f}: X \to Y$, $g,\tilde{g}: Y \to Z$. Then, $g \circ f = \tilde{g} \circ \tilde{f}$.
	\end{enumerate}
\end{exercise}
\begin{proof}\leavevmode
	\begin{enumerate}
		\item 
			\fbox{\em Reflexivity.} Let $f: X \to Y$ be any function. 
			
			Because of the reflexivity of the equality on sets, $X = X$ and $Y = Y$. Therefore, $f$ and $f$ have equal domain and codomains. Because of the reflexivity of objects, $f(x) = f(x)$, for all $x \in X$. By definition, $f = f$.
			
			\fbox{\em Symmetry.} Let $f: X \to Y,f': X' \to Y'$ be functions such that $f = f'$. 
			
			Then, by definition, $X = X', Y = Y'$, and $\forall x \in (X=X'), (f(x) = f'(x))$. Because of the symmetry of equality of objects (note that sets are also objects), $X' = X, Y' = Y$, and $\forall x \in (X=X'), (f'(x) = f(x))$. Therefore, by definition, $f' = f$.
			
			\fbox{\em Transitivity.} Let $f_0: X_0\to Y_0,\ f_1:X_1\to Y_1,\ f_2:X_2\to Y_2$ be such functions that $f_0 = f_1$ and $f_1 = f_2$.
			
			Then, by the definition of function equality, $X_0 = X_1 \wedge X_1 = X_2$, and $Y_0 = Y_1 \wedge Y_1 = Y_2$. By the transitivity of equality of objects, we have $X_0 = X_2$ and $Y_0 = Y_2$. Similarly, we can obtain $\forall x \in (X_0 = X_2), (f_0(x) = f_2(x))$. Therefore, by definition, we have $f_0 = f_2$.
		
		\item 
			By the reflexivity of the equality of sets, $X = X$ and $Z = Z$. Thus, the domains and codomains match.
			
			Now, let $x$ be any element in $X$. We show it is always true that $(g \circ f)(x) = (\tilde{g} \circ \tilde{f})(x)$.
			
			By the definition of composition, $(\tilde{g} \circ \tilde{f})(x) = \tilde{g}(\tilde{f}(x))$. By the definition of function equality, $\tilde{f}(x) = f(x)$. By the axiom of substitution on objects $\tilde{f}(x),f(x)$, we can then say $\tilde{g}(\tilde{f}(x)) = \tilde{g}(f(x))$. By the definition of function equality, we have $\tilde{g}(f(x)) = g(f(x))$. By the transitivity of object equality, we can then conclude $\tilde{g}(\tilde{f}(x)) = g(f(x))$, as desired.
	\end{enumerate}
\end{proof}

\begin{exercise}{3.3.2}
	Let $f: X \to Y, g: Y \to Z$ be functions.
	\begin{enumerate}
		\item If $f,g$ are both injective, then so is $g \circ f$.
		\item If $f,g$ are both surjective, then so is $g \circ f$.
	\end{enumerate}
\end{exercise}
\begin{proof}\leavevmode
	\begin{enumerate}
		\item Let $x, x'$ be any two elements in $X$. If $x \ne x'$, then by the definition of injectivity, $f(x) \ne f(x')$. By the definition again,
		$g(f(x)) \ne g(f(x'))$. This, by the definition of composition, means that $(g \circ f)(x) \ne (g \circ f)(x')$, as desired.
		
		\item Let $z$ be any element in $Z$. Because $g$ is surjective, there exists $y \in Y$ such that $g(y) = z$. Because $f$ is surjective, there exists $x \in X$ such that $f(x) = y$. 
		By the axiom of substitution, $z = g(y) = g(f(x))$, as desired.
	\end{enumerate}
\end{proof}

\begin{exercise}{3.3.3}
	When is the empty function into a given set $X$ injective, surjective, and bijective?
\end{exercise}
\begin{proof}
	Be careful how you intrepret the definition of injectivity. I didn't know how, so I had asked a \href{https://math.stackexchange.com/questions/3800240/how-to-interpret-the-definition-of-injectivity}{question} at Stack Exchange regarding this problem.

	\fbox{\em Injective.} For such a function $f: \emptyset \to X$ to be injective, we must have
	\[
	\forall x \forall x'\Bigl[(x \in \emptyset \wedge x' \in \emptyset) \to \bigr(x \ne x' \to f(x) \ne f(x')\bigl)\Bigr]
	\]
	, which is always vacuously true.
	
	\fbox{\em Surjective.} For such a function $f: \emptyset \to X$ to be surjective, we must have
	\[
	\forall y\Bigl[y \in X \to \bigl(\exists x(x \in \emptyset \wedge f(x) = y)\bigr)\Bigr]
	\]
	, which is false (because $x \in \emptyset$ is false), unless $y \in X$ is false. In that case, $X = \emptyset$.
	
	\fbox{\em Bijective.} Is true if $X = \emptyset$. Because only then can the function be surjective.
\end{proof}

I am tempted to discover and prove something stronger, because such boring situations involving these boring sets will be encountered a lot, later when we talk more about injectivity and surjectivity.
\begin{thm}\label{my.boring.inj.surj.thm}
	Let $f: X \to Y$ be a function, then
	\begin{enumerate}
		\item If $X = \emptyset$ or is a singleton $\{x\}$, then $f$ must be injective.
		\item If $Y = \emptyset$ or is a singleton $\{y\}$, then $f$ must be surjective.
	\end{enumerate}
\end{thm}
\begin{proof}\leavevmode
	\begin{enumerate}
		\item If $X = \emptyset$, then it's already proven in \exerciseref{3.3.3}.
		
		If $X$ is a singleton set, then for $x,x' \in X$, $x \ne x' \to f(x) \ne f(x')$ is always vacuously true. Thus, $f$ is injective.
		
		\item If $Y = \emptyset$, then $y \in Y \to \exists x(\dots)$ is always vacuously true.
		
		If $Y = \{y\}$, then we have two situations.
		\begin{enumerate}
			\item If $X = \emptyset$, then as shown in \exerciseref{3.3.3}, $f$ is surjective.
			\item If $X \ne \emptyset$, then there exists some $x \in X$. By the definition of functions, $f(x)$ must be in $Y$. Because $Y$ is a singleton, we must have $f(x) = y$. Because $Y$ is a singleton again, its only single element is mapped to by $f$, and thus $f$ is surjective.
		\end{enumerate}
	\end{enumerate}
\end{proof}

\begin{exercise}{3.3.4}
	Let $f,\tilde{f}: X \to Y$, $g,\tilde{g}: Y \to Z$ be functions. Then,
	\begin{enumerate}
		\item If $g \circ f = g \circ \tilde{f}$ and $g$ is injective, then $f = \tilde{f}$.
		\item If $g \circ f = \tilde{g} \circ f$ and $f$ is surjective, then $g = \tilde{g}$.
	\end{enumerate}
\end{exercise}
\begin{proof}\leavevmode
	The domains and codomains always match by the premise. We only need to prove that that function values equal.
	\begin{enumerate}
		\item By the definition of function equality, for all $x \in X$, $(g \circ f)(x) = (g \circ \tilde{f})(x)$. By the definition of composition, $g(f(x)) = g(\tilde{f}(x))$. Because $g$ is injective, we must have $f(x) = \tilde{f}(x)$ for all $x \in X$.
		
		\item To show that $g = \tilde{g}$, we have to show that $g(y) = \tilde{g}(y)$ for all $y \in Y$. Note that now the variable takes value in $Y$, instead of in $X$. 
		
		Suppose for the sake of contradiction that $g \ne \tilde{g}$, then, (because the domains and codomains already match,) there must exist at least one $y\in Y$ such that $g(y) \ne \tilde{g}(y)$. Because $f$ is surjective, we must also have some $x \in X$ such that $f(x) = y$. 
		
		Now consider $(g \circ f)(x)$ and $(\tilde{g}\circ f)(x)$, they equal to, by the definition of composition, $g(y)$ and $\tilde{g}(y)$, respectively. But they should be equal by the premise, a contradiction.
		
		Note that proof by contradiction is used here but not above. This is because we can apply injectivity nicely from the opposite direction of function composition above, but we cannot apply surjectivity  the same way down here, since it tells nothing about equality. Hence, if one way is hard to walk, then we tend to another.
	\end{enumerate}

	We cannot have each desired statement if we do not assume injectivity/\discretionary{}{}{}surjectivity:
	\begin{enumerate}
		\item If $g$ is not injective, then there can be some $y \ne y' \in Y$ such that $g(y) = g(y')$. If for some $x$, $f(x) = y$ while $\tilde{f}(x) = y'$, then we can still have the composition equal.
		
		\item If $f$ is not surjective, then there exists some $y \in Y$ that is not mapped to by $f$. For these $y$'s, $g(y)$ and $\tilde{g}(y)$ can be different without affecting its composition with $f$.
	\end{enumerate}
\end{proof}

\begin{exercise}{3.3.5}
	Let $f: X \to Y$, $g: Y \to Z$ be functions. Show that,
	\begin{enumerate}
		\item If $g \circ f$ is injective, then so must $f$.
		\item If $g \circ f$ is surjective, then so must $g$.
	\end{enumerate}
\end{exercise}
\begin{proof}\leavevmode
	\begin{enumerate}
		\item First, if $X = \emptyset$ or $\{x\}$, then $f$ must be injective, by My Theorem~\ref{my.boring.inj.surj.thm}.
		
		Suppose for the sake of contradiction that $f$ is not injective. Then, there must exist such $x,x' \in X$ that $x \ne x'$ but $f(x) = f(x')$. By the axiom of substitution, this implies that $g(f(x)) = g(f(x'))$, a contradiction with our premise.
		
		\item This time we don't have to exclude the situation, nor do we have to use consider the special situations. Just expand the definition of composition to get that $g(f(x))$ can reach every element in $Y$, so in particular $g$ has to be able to do that.
	\end{enumerate}
\end{proof}

\begin{exercise}{3.3.6}
	Let $f: X\to Y$ be a bijective function, and $f^{-1}: Y \to X$ be its inverse. Then,
	\begin{enumerate}
		\item For all $x \in X$, $f^{-1}(f(x)) = x$; for all $y \in Y$, $f(f^{-1}(y)) = y$.
		\item $f^{-1}$ is invertible. And $(f^{-1})^{-1} = f$.
	\end{enumerate}
\end{exercise}
\begin{proof}\leavevmode
	\begin{enumerate}
		\item For all $x \in X$, by the definition of functions, there exists a unique $y \in Y$ that $f(x) = y$. By the definition of $f^{-1}$, $f^{-1}(y) = x$. By the axiom of substitution, $f^{-1}(f(x)) = x$.
		
		For all $y \in Y$, by the bijectivity of $f$, there exists a unique $x$ such that $f(x) = y$. By the definition of $f^{-1}$, we have $f^{-1}(y) = x$. By the axiom of substitution, $f(f^{-1}(y)) = x$.
		
		\item To show that $f^{-1}$ is invertible, we need to show that it's bijective.
		
		Let $y,y' \in Y$ be two elements. (If $Y$ is empty then $f^{-1}$ is injective, by My Theorem~\ref{my.boring.inj.surj.thm}.) Denote $x := f^{-1}(y)$ and $x' = f^{-1}(y')$. Suppose they are equal. By the axiom of substitution, we then have $f(x) = f(x')$. By the definition of the inverse, we see that $f(x) = y$ and $f(x') = y'$, then $y = y'$. Hence, $f^{-1}$ is injective.
		
		Now we show that it is surjective. Let $x \in X$ be any element in $X$. (If $X$ is empty, then $f^{-1}$ is surjective, by My Theorem~\ref{my.boring.inj.surj.thm}.) Then $y := f(x) \in Y$, by the definition of functions. By the definition of $f^{-1}$, we must have $f^{-1}(y) = x$, as desired.
	\end{enumerate}
\end{proof}

\begin{exercise}{3.3.7}
	Let $f: X \to Y$, $g: Y \to Z$ be functions. If $f,g$ are both bijective, then
	\begin{enumerate}
		\item So is $g \circ f$.
		\item $(g \circ f)^{-1} = f^{-1} \circ g^{-1}$.
	\end{enumerate}
\end{exercise}
\begin{proof}\leavevmode
	\begin{enumerate}
		\item If $X$ is empty, then by My Theorem~\ref{my.boring.inj.surj.thm}, $g \circ f$ is injective. Otherwise, let $x,x'$ be any elements in $X$. Suppose $(g \circ f)(x) = (g \circ f)(x)$, then $g(f(x)) = g(f(x'))$, by the definition of composition. By the injectivity of $g$, we must have $f(x) = f(x')$. By the injectivity of $f$, we musth then have $x = x'$. Hence, $g \circ f$ is injective.
		
		If $Z$ is empty, then by My Theorem~\ref{my.boring.inj.surj.thm}, $g \circ f$ is surjective. Otherwise, let $z$ be any element in $Z$. By the surjectivity of $g$, there exists $y \in Y$ such that $g(y) = z$. By the surjectivity of $f$, there exists such $x \in X$ that $f(x) = y$. By the axiom of substitution, $g(f(x)) = z$. By the definition of composition, $g \circ f(x) = z$. Hence, $g \circ f$ is surjective.
		
		\item First, we have $g^{-1}: Z \to Y$ and $f^{-1}: Y \to X$, by the definition of inverses. By the definition of composition, $f^{-1} \circ g^{-1}$ is from $Z$ to $X$, the same as $(g \circ f)^{-1}$.
		
		Now, we show that their values are also equal. Let $z$ be any element in $Z$. Denote $g^{-1}(z) = y$ and $f^{-1}(y) = x$, and we have $(f^{-1} \circ g^{-1})(z) = f^{-1}(g^{-1}(z)) = x$.
		
		By the definition of inverses, we must have $f(x) = y$ and $g(y) = z$, which means, by the axiom of substitution, $g(f(x)) = z$, that is, $(g \circ f)(x) = z$. By the definition of inverses, this means that $(g \circ f)^{-1}(z) = x$. As $z$ is any element in $Z$, the two functions are equal.
	\end{enumerate}
\end{proof}

\begin{exercise}{3.3.8}
	If $X \subseteq Y$ are such sets, then let $\iota_{X \to Y}$ be defined as $X \to Y,\ x \mapsto x$. Then,
	\begin{enumerate}
		\item If $X \subseteq Y \subseteq Z$, then $\iota_{Y \to Z} \circ \iota_{X \to Y} = \iota_{X \to Z}$.
		\item Let $f$ be any function from $A$ to $B$. Then, $f = f \circ \iota_{A \to A} = \iota_{B \to B} \circ f$.
		\item If $f: A \to B$ is bijective, then $f \circ f^{-1} = \iota_{B \to B}$, and $f^{-1} \circ f = \iota_{A \to A}$.
		\item Let $X,Y$ be disjoint sets. Let $f: X \to Z$ and $g: Y \to Z$ be functions. Then, there exists a \emph{unique} function $h: X \cup Y \to Z$ such that $f = h \circ \iota_{X \to X \cup Y}$ and $g = h \circ \iota_{X \to X \cup Y}$.
		\item We can remove the limitation for $X,Y$ to be disjoint, if we have $f(x) = g(x)$ for all $x \in X \cap Y$.
	\end{enumerate}
\end{exercise}
\begin{proof}\leavevmode
	\begin{enumerate}
		\item First, it is clear that they have the same domain and codomain.
		
		To show that they are equal, consider all $x \in X$ and the value 
		\begin{align*}
			&(\iota_{Y \to Z} \circ \iota_{X \to Y})(x) \\
			&= \iota_{Y \to Z}(\iota_{X \to Y}(x)) 		&\text{def.~of composition}\\
			&= \iota_{Y \to Z}(x) 						&\text{def.~of}\ \iota_{X \to Y}\\
			&= x 										&\text{def.~of}\ \iota_{Y \to Z}\\
			&= \iota_{X \to X}(x)						&\text{def.~of}\ \iota_{X \to X}
		\end{align*}
		, as desired.
		
		\item First, it is clear that they have the same domain and codomain.
		
		To show that they are equal, consider all $a \in A$ and the value
		\begin{align*}
			&(f \circ \iota_{A \to A})(a) \\
			&= f(\iota_{A \to A}(a)) 		&\text{def.~of composition}\\
			&= f(a) 						&\text{def.~of}\ \iota_{A \to A}\\
			&= \iota_{B \to B}(f(a))		&\text{def.~of}\ \iota_{B \to B}\\
			&= (\iota_{B \to B} \circ f)(a)	&\text{def.~of composition}\\
		\end{align*}
		, as desired.
		
		\item First, it is clear that the domains and codomains match.
		
		To show that $f^{-1} \circ f = \iota_{A \to A}$, consider, for all $x \in A$, the value $(f^{-1} \circ f)(x)$. It equals to $x$ by \exerciseref{3.3.6}, and thus equals to $\iota_{A \to A}(x)$ by definition, as desired.
		
		To show that $f \circ f^{-1} = \iota_{B \to B}$, consider, for all $y \in B$, the value $(f \circ f^{-1})(y)$. It equals to $y$ by \exerciseref{3.3.6}, and thus equals to $\iota_{B \to B}(y)$ by definition, as desired.
		
		\item \fbox{\em Existence.} Define $h: X \cup Y \to Z$ as
		\[
		\begin{cases}
			a \mapsto f(a) &a \in X \\
			a \mapsto g(a) &a \in Y
		\end{cases}
		\]
		Now we show that it is a valid definition of a function. To show this, we need to show that for all $a \in X \cup Y$, there is a unique value $b \in Z$ such that $h(a) = b$.
		
		By the definition of $X \cup Y$, $a$ is either in $X$ or $Y$, but not both, since they are disjoint. If $a \in X$, then there is a value, namely $f(a)$. But because $f$ is a function, the value is unique. Similarly, we can show the statement when $a \in Y$.
		
		\fbox{\em Uniqueness.} Now we know that the definition gives a valid function, we show that it is unique. Suppose that we define another function $h'$ using the same definition. We will show that $h = h'$.
		
		Obviously, they have the same domain and codomain by definition. Now we consider, for all $a \in X \cup Y$, their values. By definition, if $a \in X$, then $h(a) = f(a) = h'(a)$. Similarly, if $a \in Y$, then $h(a) = g(a) = h'(a)$. Because $a$ is either in $X$ or $Y$, we have verified all the possible $a$'s, and hence, $h = h'$, as desired.
		
		\fbox{\em The two compositions.} Now we consider
		\begin{enumerate}
			\item $h \circ \iota_{X \to X \cup Y}$ and $f$. Obviously, they have the same domain and codomain.
			
			For all $x \in X$, 
			\begin{align*}
				&(h \circ \iota_{X \to X \cup Y})(x) \\
				&= h(\iota_{X \to X \cup Y}(x)) 	&\text{def.~of composition}\\
				&= h(x) 							&\text{def.~of}\ \iota_{X \to X \cup Y}\\
				&= f(x)								&\text{def.~of}\ h \wedge x \in X
			\end{align*}
			, as desired.
			
			\item $h \circ \iota_{Y \to X \cup Y}$ and $g$. Obviously, they have the same domain and codomain.
			
			For all $y \in Y$, 
			\begin{align*}
				&(h \circ \iota_{Y \to X \cup Y})(y) \\
				&= h(\iota_{Y \to X \cup Y}(y)) 	&\text{def.~of composition}\\
				&= h(y) 							&\text{def.~of}\ \iota_{Y \to X \cup Y}\\
				&= g(y)								&\text{def.~of}\ h \wedge y \in Y
			\end{align*}
			, as desired.
		\end{enumerate}
		
		\item \fbox{\em Existence.} Define $h: X \cup Y \to Z$ as
		\[
		\begin{cases}
			a \mapsto f(a), &a \in X \\
			a \mapsto f(a), &a \in X \cap Y \\
			a \mapsto g(a), &a \in Y
		\end{cases}
		\]
		Now we show that it is a valid definition of a function. To show this, we need to show that for all $a \in X \cup Y$, there is a unique value $b \in Z$ such that $h(a) = b$.
		
		This time, we have to consider different sets of values. We let $\Omega := X \cup Y$. By \exerciseref{3.1.7} (3), $X,Y \subseteq \Omega$. Hence, by \exerciseref{3.1.6} (g), $X \cup (\Omega \setminus X) = \Omega$.
		
		Now we consider two situations,
		\begin{enumerate}
			\item When $a \in X$. Then, by definition, $h(a) = f(a)$, whether $a \in X \cap Y$ or not.
			\item When $a \in \Omega \setminus X$. Then, $a$ has to be in $Y$, because $\Omega = X \cup Y$. By definition, $h(a) = g(a)$.
		\end{enumerate}
		Using the same reasoning as above, we see that for each $a$, $h(a)$ is unique. Hence, this is a valid definition of a function.
		
		\fbox{\em Uniqueness.} Now we know that the definition gives a valid function, we show that it is unique. Suppose that we define another function $h'$ using the same definition. We will show that $h = h'$.
		
		Obviously, they have the same domain and codomain by definition. Now we consider, for all $a \in X \cup Y$, their values. 
		
		By definition, if $a \in X$, then $h(a) = f(a) = h'(a)$. Similarly, if $a \in \Omega \setminus X$, then $h(a) = g(a) = h'(a)$. Because $a$ is either in $X$ or $\Omega \setminus X$, we have verified all the possible $a$'s, and hence, $h = h'$, as desired.
		
		\fbox{\em The two compositions.} Now we consider
		\begin{enumerate}
			\item $h \circ \iota_{X \to X \cup Y}$ and $f$. Obviously, they have the same domain and codomain.
			
			For all $x \in X$, 
			\begin{align*}
				&(h \circ \iota_{X \to X \cup Y})(x) \\
				&= h(\iota_{X \to X \cup Y}(x)) 	&\text{def.~of composition}\\
				&= h(x) 							&\text{def.~of}\ \iota_{X \to X \cup Y}\\
				&= f(x)								&\text{def.~of}\ h \wedge x \in X
			\end{align*}
			, as desired.
			
			\item $h \circ \iota_{Y \to X \cup Y}$ and $g$. Obviously, they have the same domain and codomain.
			
			For all $y \in Y$, 
			\begin{align*}
				&(h \circ \iota_{Y \to X \cup Y})(y) \\
				&= h(\iota_{Y \to X \cup Y}(y)) 	&\text{def.~of composition}\\
				&= h(y) 							&\text{def.~of}\ \iota_{Y \to X \cup Y}\\
				&= g(y) \text{ or } f(y)			&\text{def.~of}\ h \wedge y \in Y\\
				&= g(y)								&x \in X \cap Y \to h(x) = g(x)
			\end{align*}
			, as desired.
		\end{enumerate}
	\end{enumerate}
\end{proof}

\section{Images and inverse Images}
\begin{why}{47}
	The image of a function can be defined by using the axiom of specification, instead of the axiom of replacement.
\end{why}
\begin{proof}
	Let $f: X \to Y$ be any function. Let $P(x,y)$ be the property bound to $f$. Let $S$ be a subset of $X$. Define a property $Q(y)$ pertaining to elements in $Y$ this way:
	\[
	Q_S(y) := \exists x (x \in S \wedge P(x,y))
	\]
	And we define $f(S)_1 := \{y \in Y : Q_S(y)\}$.
	
	By the axiom of specification, the set $f(S)_1$ is well defined. Now we show that it equals to that set defined using the axiom of replacement: $f(S)_0 := \{x \in S : f(x)\}$.
	
	For any $y \in f(S)_0$, it must be replaced from some $x \in S$. By the definition of $f(S)_1$, we have $y \in f(S)_1$.
	
	For any $y \in f(S)_1$, by the definition of it, there exists a $x \in S$ such that $P(x,y)$ is true. By the definition of $f$, we must have $f(x) = y$. By the axiom of replacement, this $y$ is thus in $f(S)_0$.
\end{proof}

\begin{why}{48}
	Let $f: X \to Y$ be any function. Let $S$ be a subset of $X$. Then,
	\[
	y \in f(S) \leftrightarrow \exists x (x \in S \wedge y = f(x))
	\]
\end{why}
\begin{proof}
	Recall how we defined $f(S)$ using the axiom of replacement and showed that it is indeed the same set defined using the axiom of specification: $f(S) := \{y \in Y : Q_S(y)\}$, where
	\[
		Q_S(y) := \exists x (x \in S \wedge P(x,y))
	\]
	
	By the definition of functions, $P(x,y)$ iff $y = f(x)$. Thus,
	\[
		Q_S(y) \leftrightarrow \exists x (x \in S \wedge y = f(x))
	\]
	, as desired.
\end{proof}

\begin{why}{48}\label{why.func.image.surj}
	Let $f: \setn \to \setn, x \mapsto 2x$. We have
	\[
	f(f^{-1}(\{1,2,3\})) \ne \{1,2,3\}
	\]
\end{why}
\begin{proof}
	According to Prof.~Tao, $f^{-1}(\{1,2,3\}) = \{1\}$. But $f(\{1\}) = \{2\} \ne \{1,2,3\}$. 
\end{proof}

The problem is that this $f$ is not surjective, and $\{1,2,3\} \subsetneq f(\setn)$. But what if I restrict a function $f: X \to Y$ to be surjective --- will $f(f^{-1}(T)) = T$ for all $T \subseteq Y$? Let's see.

\begin{prop}\label{my.surj.image.prop}
	Let $f: X \to Y$ be any surjective function. Let $T$ be a subset of $Y$, then we have
	\[
		f(f^{-1}(T)) = T
	\]
\end{prop}
\begin{proof}
	Suppose for the sake of contradiction that $f(f^{-1}(T)) \ne T$, then we have two situations:
	\begin{enumerate}
		\item There exists $t \in T$ such that $t \notin f(f^{-1}(T))$. By the definition of inverse images, $f^{-1}(T)$ contains this set $S = \{x \in X: f(x) = t\}$. Because $f$ is surjective, and $X$ is the whole domain, $S$ is non-empty. 
		
		By the definition of forward images, we then must have $t$ in $f(f^{-1}(T))$, mapped to by some element in $S$, a contradiction.
		
		\item There exists $t \in f(f^{-1}(T))$ such that $t \notin T$. By the definition of forward images, there exists some element $s \in f^{-1}(T)$ such that $f(s) = t$. By the definition of inverse images, there must exist some element $t' \in T$, such that $t' = f(s) = t$, which means $t \in T$, a contradiction.
	\end{enumerate}
	Therefore, $f(f^{-1}(T)) = T$, as desired.
	
	Note that surjectivity is not used at all in the second situation. Therefore, in all cases, we must have $f(f^{-1}(T)) \subseteq T$.
\end{proof}

Surprisingly, for $f(f^{-1}(T)) = T$ we generally don't need $f$ to be bijective. It is not the case for a function values, though --- $f$ must be bijective for its inverse function to exist!

Symmetrical to the above Why~\ref{why.func.image.surj}, Prof.~Tao asked this:
\begin{why}{49}
	Let $f: \setz \to \setz$ by defined as $x \mapsto x^2$. We have
	\[
		f^{-1}(f(\{-1,0,1,2\})) \ne \{-1,0,1,2\}
	\]
\end{why}
\begin{proof}
This is because 
\[
	f^{-1}(f(\{-1,0,1,2\})) = f^{-1}(\{1,0,4\}) = \{-1,1,0,2,-2\}
\].
\end{proof}

The problem here is that, $f$ is not injective, so an element in $f(S)$ may correspond to multiple elements in $f^{-1}(f(S))$.

Symmetrical to the above My Proposition~\ref{my.surj.image.prop}, we can show that $f^{-1}(f(S)) = S$, if $f$ is injective.
\begin{prop}\label{my.inj.image.prop}
	Let $f: X \to Y$ be any injective function. Let $S$ be a subset of $X$, then we have
	\[
		f^{-1}(f(S)) = S
	\]
\end{prop}
\begin{proof}
	Suppose for the sake of contradiction that $f^{-1}(f(S)) \ne S$. Then we have two situations,
	\begin{enumerate}
		\item $\exists s \in S$ such that $s \notin f^{-1}(f(S))$. By the definition of forward images, we have $f(s) \in f(S)$. By the definition of inverse images, we must have $s \in f^{-1}(f(S))$, because $f(s)$ results in an element in $f(S)$, whether $f$ is injective or not. This is a contradiction.
		
		\item $\exists s \in f^{-1}(f(S))$ such that $s \notin S$. This is where we will need the injectivity of $f$. By the definition of inverse images, we have $f(s) \in f(S)$. By the injectivity, $s$ is the only element in $X$ for which $f$ equals $f(s)$. By our assumption, $s \notin S$, then we cannot have $f(s) \in f(S)$, a contradiction.
	\end{enumerate}
	Therefore, $f^{-1}(f(S)) = S$, as desired.

	Note that injectivity is not used at all in the second situation. Therefore, in all cases, we must have $S \subseteq f^{-1}(f(S))$.
\end{proof}

Putting My Proposition~\ref{my.surj.image.prop} and My Proposition~\ref{my.inj.image.prop} together, we have the following theorem.
\begin{thm}\label{my.inj.surj.image.thm}
	Let $f: X \to Y$ be any function, $S$ be a subset of $X$, and $T$ be a subset of $Y$, then we have
	\begin{enumerate}
		\item $S \subseteq f^{-1}(f(S))$.
		\item $f(f^{-1}(T)) \subseteq T$.
	\end{enumerate}

	If $f$ is additionally injective, then we also have $S = f^{-1}(f(S))$. If $f$ is additionally surjective, then we also have $f(f^{-1}(T)) = T$. So, if $f$ is bijective, then we have both, a result similar to that in \exerciseref{3.3.6}.
\end{thm}

\begin{exercise}{3.4.1}
	Let $f: X \to Y$ be function, and let $V$ be a subset of $Y$. If $f$ is bijective, then we can treat $f^{-1}(V)$ as both the forward image of $f^{-1}$ and the inverse image of $f$. Show that they are the same.
\end{exercise}
\begin{proof}
	Let $S$ denote the forward image, that is, $S = \{y \in V: f^{-1}(y)\}$, by the axiom of replacement. Let $T$ denote the inverse image, that is, $T = \{x \in X: \exists y (y \in V \wedge f(x) = y)\}$, by the axiom of specification. We show that $S = T$.
	
	For all $s \in S$, by its definition, there is a $y \in V$ that is replaced to it: $s = f^{-1}(y)$. By the definition of inverse functions, $f(s) = y$. This matches the condition in the definition of $T$, so we must have $s \in T$.
	
	For all $t \in T$, by its definition, there exists a $y \in V$ such that $f(t) = y$. By the definition of inverse functions, $f^{-1}(y) = t$. Because $y \in V$, it has to be replaced in the definition of $S$, to $t$. Therefore, $t \in S$.
\end{proof}

\begin{exercise}{3.4.2}
	Let $f: X \to Y$ be a function. Let $S \subseteq X$, and $U \subseteq Y$.
	\begin{enumerate}
		\item What can we say about $f^{-1}(f(S))$ and $S$?
		\item What can we say about $f(f^{-1}(U))$ and $U$?
		\item What about $f^{-1}(f(f^{-1}(U)))$ and $f^{-1}(U)$?
	\end{enumerate}
\end{exercise}
\begin{proof}\leavevmode
	\begin{enumerate}
		\item According to My Theorem~\ref{my.inj.surj.image.thm}, generally we have $S \subseteq f^{-1}(f(S))$. And if $f$ is injective, then the $\subseteq$ becomes $=$.
		
		\item According to My Theorem~\ref{my.inj.surj.image.thm}, generally we have $f(f^{-1}(U)) \subseteq U$. And if $f$ is surjective, then the $\subseteq$ becomes $=$.
		
		\item According to (1), generally, at least we should have $f^{-1}(U) \subseteq f^{-1}$\discretionary{}{}{}$(f(f^{-1}$\discretionary{}{}{}$(U)))$, if we regard $f^{-1}(U)$ as a subset of $X$. However, since Prof.~Tao mentioned this in particular, I wonder if I can prove something stronger, that is, if they are always equal in general.
		
		Now I only need to prove that $f^{-1}(f(f^{-1}(U))) \subseteq f^{-1}(U)$.
		
		For all $x \in f^{-1}(f(f^{-1}(U))$, by the definition of inverse images, there exists a $y \in f(f^{-1}(U))$ such that $f(x) = y$. Because $f(f^{-1}(U)) \subseteq U$, according to (2), we must also have $y \in U$. By the definition of inverse images again, we must have $x \in f^{-1}(U)$, since $f(x) = y \in U$.
		
		Therefore, in general we can also say $f^{-1}(f(f^{-1}(U))) = f^{-1}(U)$.
	\end{enumerate}
\end{proof}

\begin{exercise}{3.4.3}
	Let $A,B \subseteq X$ be sets. Let $f: X \to Y$ be a function. Then,
	\begin{enumerate}
		\item $f(A \cap B) \subseteq f(A) \cap f(B)$.
		\item $f(A) \setminus f(B) \subseteq f(A \setminus B)$.
		\item But $f(A \cup B) = f(A) \cup f(B)$.
	\end{enumerate}
\end{exercise}
\begin{proof}\leavevmode
	\begin{enumerate}
		\item For all $y \in f(A \cap B)$, we have $\exists x(x \in A \cap B \wedge f(x) = y)$. For such $x$, we have $x \in A$, thus $f(x) \in f(A)$, and $x \in B$, thus $f(x) \in f(B)$. Hence $y = f(x) \in f(A) \cap f(B)$, as desired.
		
		Note that the converse isn't generally true. If there exists $x \in A \setminus B, x' \in B \setminus A$ such that $x \ne x'$ and $f(x) = f(x')$, then we see that $x,x' \notin A \cap B$. Suppose that in addition that no other elements in $X$ can result in the value of $f = f(x)$, then we see that $f(A) \cap f(B)$ will contain $f(x)$, but $f(A \cap B)$ will not.
		
		\item For all $y \in f(A) \setminus f(B)$, we must have $y$ satisfy
		\[
		\exists x(x \in A \wedge f(x) = y) \wedge \forall x(x \in B \to f(x) \ne y)
		\]
		
		Let $x_0$ be some element that satisfies the $\exists$ statement. We have two situations:
		\begin{enumerate}
			\item $x_0 \in B$. Then, according to the $\forall$ statement, we have $f(x_0) \ne y$, a contradiction. Therefore, this situation is not possible.
			\item $x_0 \notin B$. Then, $x \in A \setminus B$, and by definition, $y = f(x) \in f(A \setminus B)$.
		\end{enumerate}
	
		The converse, generally is still not true. For a $x \in A \setminus B$, $f(x)$ might still equal to $f(x')$ for some $x' \in B$, if $f$ is not injective.
	
		\item For all $y \in f(A \cup B)$, we have
		\begin{equation}
			\exists x(x \in A \cup B \wedge f(x) = y) \label{eq.1.exer.3.4.3}
		\end{equation}
	
		For all $y \in f(A) \cup f(B)$, we have
		\begin{equation}
			\exists x(x \in A \wedge f(x) = y) \vee \exists x(x \in B \wedge f(x) = y) \label{eq.2.exer.3.4.3}
		\end{equation}
		
		We have to show the two logical statements are equivalent.
		\begin{enumerate}
			\item If $x$ satisfies \eqref{eq.1.exer.3.4.3}, then $x \in A \vee x \in B$, and $f(x) = y$. Therefore, we see that \eqref{eq.2.exer.3.4.3} can be satisfied.
			
			\item If $x$ satisfies \eqref{eq.2.exer.3.4.3}, then we have $x \in A \wedge f(x) = y$ or $x \in B \wedge f(x) = y$. Either case, we have $(x \in A \vee x \in B) \wedge f(x) = y$, that is, $x \in A \cup B \wedge f(x) = y$, satisfying \eqref{eq.1.exer.3.4.3}.
		\end{enumerate}
	\end{enumerate}

	In fact, let $P(x), Q(x)$ be predicates indicating that $x \in A$ and $x \in B$, respectively. And let $R(x)$ indicate $f(x) = y$. Then, we are essentially proving
	\begin{enumerate}
		\item $\exists x(P(x) \wedge Q(x) \wedge R(x)) \to \bigl[\exists x(P(x) \wedge Q(x)) \wedge \exists x(P(x) \wedge R(x))\bigr]$.
		\item $\bigl[\exists x(P(x) \wedge R(x)) \wedge \nexists x(Q(x) \wedge R(x))\bigr] \to \exists x(P(x) \wedge \neg Q(x) \wedge R(x))$.
		\item $\exists x((P(x) \vee Q(x)) \wedge R(x)) \equiv \bigl[\exists x(P(x) \wedge R(x)) \vee \exists x (P(x) \wedge R(x))\bigr]$.
	\end{enumerate}
\end{proof}

\begin{exercise}{3.4.4}
	Let $f: X \to Y$ be a function. Let $U,V$ be subsets of $Y$. Then,
	\begin{enumerate}
		\item $f^{-1}(U \cup V) = f^{-1}(U) \cup f^{-1}(V)$.
		\item $f^{-1}(U \cap V) = f^{-1}(U) \cap f^{-1}(V)$.
		\item $f^{-1}(U \setminus V) = f^{-1}(U) \setminus f^{-1}(V)$.
	\end{enumerate}
\end{exercise}
\begin{proof}
	For all $x \in X$, by definition $x \in f^{-1}(T)$ iff $f(x) \in T$. Therefore, we can translate them as:
	\begin{enumerate}
		\item $f(x) \in U \cup V$ versus $f(x) \in U \vee f(x) \in V$, which by the definition of pairwise union, are the same.
		\item $f(x) \in U \cap V$ versus $f(x) \in U \wedge f(x) \in V$, which by the definition of intersection, are the same.
		\item $f(x) \in U \setminus V$ versus $f(x) \in U \wedge \neg(f(x) \in V)$, which by the definition of set difference, are the same.
	\end{enumerate}
\end{proof}

\begin{exercise}{3.4.5}
	Let $f: X \to Y$ be a function. Then,
	\begin{enumerate}
		\item $\forall S(S \subseteq Y \to f(f^{-1}(S)) = S)$ iff $f$ is surjective.
		\item $\forall S(S \subseteq X \to f^{-1}(f(S)) = S)$ iff $f$ is injective.
	\end{enumerate}
\end{exercise}
\begin{proof}\leavevmode
	\begin{enumerate}
		\item \myifbox An immediate consequence of My Theorem~\ref{my.inj.surj.image.thm}.
		
		\myoifbox Suppose for the sake of contradiction that $f$ is not surjective. Then, the set 
		$S := \{y \in Y: \forall x(x \in X \to f(x) \ne y)\}$ is non-empty. Clearly, $S \subseteq Y$, then by premise we must have $f(f^{-1}(S)) = S$. However, by the definition of $S$ and the definition of inverse images, we have $f^{-1}(S) = \emptyset$, and thus $f(f^{-1}(S)) = \emptyset$, a contradiction (as $S$ is non-empty).
		
		\item \myifbox An immediate consequence of My Theorem~\ref{my.inj.surj.image.thm}.
		
		\myoifbox Suppose for the sake of contradiction that $f$ is not injective. Then, there exists such $x,x' \in X$ that $x \ne x'$ but $f(x) = f(x')$. Let $S := \{x\}$. Then, by the definition of forward images, $f(S) = \{f(x)\}$. However, by the definition of inverse images, $\{x,x'\} \subseteq f^{-1}(\{f(x)\})$, so it clearly is not equal to $S$, a contradiction.
	\end{enumerate}
\end{proof}

\begin{why}{50}
	\[
		\bigcup \{\{2,3\},\{3,4\},\{4,5\}\} = \{2,3,4,5\}
	\]
\end{why}
\begin{proof}
	First, we prove that $\bigcup \{\{2,3\},\{3,4\},\{4,5\}\} \subseteq \{2,3,4,5\}$. Clearly, $\{2,3\}$, $\{3,4\}$, $\{4,5\} \subseteq \{2,3,4,5\}$. If $x \in \bigcup \{\{2,3\},\{3,4\},\{4,5\}\}$, then by definition $x$ is in one of the three sets. Hence, $x \in \{2,3,4,5\}$ by the definition of subsets.
	
	Second, we show that $\{2,3,4,5\} \subseteq \bigcup \{\{2,3\},\{3,4\},\{4,5\}\}$. We see that $2,3 \in \{2,3\}$, and $4,5 \in \{4,5\}$. Hence, by definition, all the four elements are in $\bigcup \{\{2,3\},\{3,4\},\{4,5\}\}$, as desired.
\end{proof}

\begin{why}{50}
	If $I = \emptyset$, then $\bigcup_{\alpha \in I}A_\alpha = \emptyset$.
\end{why}
\begin{proof}
	By definition, $y \in \bigcup_{\alpha \in I}A_\alpha$ iff
	\[
		\exists \alpha (\alpha \in I \wedge y \in A_\alpha)
	\]
	
	If $I = \emptyset$, then the $\exists \alpha(\dots)$ is always false for any $y$. Hence for any $y$ we have $y \notin \bigcup_{\alpha \in I}A_\alpha$, and by the empty set axiom, this set is empty.
\end{proof}

\begin{exercise}{3.4.6}
	\begin{enumerate}
		\item For all set $X$, there exists such a set $2^X$ that $Y \in 2^X$ iff $Y \subseteq X$.
		\item If we accept the above statement as an axiom, then we can prove the power set axiom, assuming the rest axioms of the set theory.
	\end{enumerate}
\end{exercise}
The proofs for the two are quite tricky. Let me divide them into parts.

\fbox{\em 1.} We use Prof.~Tao's hint.
\begin{proof}
	For any subset $Y \in X$, and any element $x \in X$, $x \in Y$ is either $\true$ or $\false$. If we regard $0 = \false$ and $1 = \true$, then for each $x$ we will assign either $0$ or $1$ to it, which looks like what a function does.

	Hence,  consider the set $\{0,1\}^X$, obtained by the axiom of power set. For all $f \in \{0,1\}^X$, we can replace $f$ with $f^{-1}(\{1\})$, because the inverse image is well defined. (That is, for each function, it has a unique inverse image on a given set.)
	
	First, be the definition of inverse images, $f^{-1}(\{1\})$ is a subset of $X$.
	
	Second, we need to show that every subset of $X$ equals $f^{-1}(\{1\})$ for some $f \in \{0,1\}^X$. Let $S \subseteq X$ be any subset of $X$. Define
	\[
	f_S: X \to \{0,1\},\ x \mapsto
	\begin{cases}
		0 & \text{if } x \notin S \\
		1 & \text{if } x \in S
	\end{cases}
	\]
	Clearly, $f_S$ is well-defined, because $x \in S$ is either true or false. By the power set axiom, $f_S \in \{0,1\}^X$. Now we only need to show that $f_S^{-1}(\{1\}) = S$.	By the definition of inverse images, $x \in f_S^{-1}(\{1\})$ iff $f(x) = 1$. Therefore, $x \in f_S^{-1}(\{1\})$ iff $x \in S$, as desired.
\end{proof}

\fbox{\em 2.} Now we assume the existence of $2^X$ for any set $X$. For any set $X$ and $Y$, we want to prove the existence of the set $Y^X$, which contains all functions from $X$ to $Y$.
\begin{proof}
	I tried many times and think this is quite hard. Let me try to break it down into smaller pieces. Then general idea is, for each element $x \in X$, it can be mapped to any element in $Y$. Then for each such mapping, another element in $X$ can be mapped to any element in $Y$, too. Repeat this until we have mapped all elements in $X$ to some element in $Y$.
	
	First, for any element $x \in X$, we would like to create a set that contains all possible mappings from it to all element in $Y$. To do this, we have to use the axiom of replacement on $Y$, replacing each element $y \in Y$ with $f_{xy}: \{x\} \to \{y\}$. This obeys the conditions of the axiom, because any function from a singleton to a singleton is unique. (Obviously the domain and codomain match; and obviously the function has only one possible value.) We denote the set created as $M_{x}$.
	
	Because $M_{x}$ solely depends on the choice of $x$, we can then replace each element $x \in X$ with $M_x$. Let's denote this big set as $\Omega_1$.
	
	This is already a breakthrough. Each $M_{x}$ has the same amount of elements as $Y$, and there are the same amount of $M_{x}$'s in $\Omega_1$ as there are elements in $X$. Prof.~Tao pointed out early that the power set $Y^X$ would have $n^m$ elements, if $Y$ has $n$ elements and $X$ has $m$. We already have exactly this number of functions in our $\Omega_1$, although
	\begin{enumerate}
		\item first we will have to extract them out from the layer of $M_{x}$'s.
		\item second they are still all singleton to singleton functions. We have to somehow manage to create ``larger'' functions from them.
	\end{enumerate}

	Anyway, let's do it step by step. Using the axiom of union, we can create
	\[
		\Omega_2 := \bigcup_{M_x \in \Omega_1} M_x
	\]
	This set contains all the singleton to singleton functions in $\Omega_1$ directly. Now we need to somehow make ``larger'' functions from them.
	
	It is where we need the assumed axiom of subsets, which (is the only axiom that) can combine the possibilities of each of these singleton to singleton functions. We then denote
	\[
		\Omega_3 := 2^{\Omega_2}
	\]
	
	Now, we select all subsets in $\Omega_3$ that can cover all $x \in X$, but only once for each, using the axiom of specification. Let $Q(S)$ be a property pertaining to all $S \in \Omega_3$ such that $Q(S)$ is true iff
	\begin{enumerate}
		\item For all $x \in X$, there exists a function $f \in S$ whose domain equals $\{x\}$.
		\item No two functions in $S$ have the same domain.
	\end{enumerate}
	, and denote the result set as
	\[
		\Omega_4 := \{S \in \Omega_3 : Q(S)\}
	\]
	
	Finally, we can turn each set in $\Omega_4$ into a corresponding function. For any $S \in \Omega_4$, define $f_S: X \to Y$ this way: For any $x \in S$, there exists, by the restriction applied with $Q(S)$, a unique $f_{xy}$ that maps $\{x\}$ to some $\{y\}$, where $y \in Y$. Define $f_S(x) := y$. Because the $f_{xy}$ is unique for any $x$, this function is well defined. We replace each $S \in \Omega_4$ with such a $f_S$, to get $\Omega_5$.
	
	Now we show that $\Omega_5$ is indeed the set that contains all functions from $X$ to $Y$.
	\begin{enumerate}
		\item First, we show that each function in $\Omega_5$ is indeed from $X$ to $Y$. By the definition of $Q(S)$, we see that every $x$ is covered. And from the construction of $f_{xy}$ earlier, we see that indeed $y \in Y$, as desired.
		
		\item Then, we show that every function from $X$ to $Y$ lies in $\Omega_5$. Let $f$ be any function in $\Omega_5$. We try to construct a $S \in \Omega_3$ that can satisfy $Q(S)$. If this is possible, then we can subsequently make $f$ again from $S$ with the above steps.
		
		With this $f$, replace each element $x$ in $X$ with the function $\{x\} \to \{f(x)\}$, to get the set $X_f$. One can easily verify that this
		\begin{enumerate}
			\item Is indeed a subset of $\Omega_2$, because each such function $\{x\} \to \{f(x)\}$ falls into $\Omega_2$, by its definition. Therefore, $X_f \in \Omega_3$.
			
			\item Satisfies the definition of $Q(S)$, because $f$ is a function from $X \to Y$ --- it covers every $x \in X$ uniquely. Therefore, $X_f \in \Omega_4$.
		\end{enumerate}
	
		Hence, we apply the replacement procedure that we used on $\Omega_4$ to get $\Omega_5$. And by the definition of the procedural, we can easily see that it preserves all the values of $f$. Hence the result must be equal to $f$.
	\end{enumerate}
	
	We have finally finished the proof. Phew.
\end{proof}

\begin{exercise}{3.4.7}
	Let $X,Y$ be sets. A partial function between the two sets, $f: X' \to Y'$, is such that $X' \subseteq X$ and $Y' \subseteq Y$.
	
	Prove the existence of a set that contains all partial functions from $X$ to $Y$.
\end{exercise}
\begin{proof}
	We use a similar idea to that used in \exerciseref{3.4.6}~(2).
	
	Because of Lemma 3.4.10, we have $2^X$ and $2^Y$. Given any $X' \in 2^X$, we can use the axiom of replacement on $2^Y$ to replace each $Y' \to 2^Y$ with $Y'^{X'}$, the set of all partial functions from $X'$ to $Y'$, and denote the result set as $F_{X'}$, which contains, for each $Y'$, the set $Y'^{X'}$. If we use the axiom of union on it, we get $\bigcup F_{X'}$ that contains all functions from $X'$ to any subset of $Y$.
	
	Because the replacement depends only on the choice of $X'$, it is unique for each $X'$. Therefore, we replace each $X' \in 2^X$ with $\bigcup F_{X'}$, to have $\Omega$. Finally, we apply the axiom of union again, on $\Omega$, to have $\bigcup \Omega$.
	
	We show that $\Omega$ is the set we want.
	\begin{enumerate}
		\item If $f: X' \to Y'$ is a partial function, then $X' \in 2^X$ and $Y' \in 2^Y$. By the way we constructed $\bigcup \Omega$, we see that $f \in F_{X'} \in \Omega$, and thus $f \in \bigcup \Omega$.
		
		\item If $f \in \bigcup \Omega$, then $f$ is in a $F_{X'}$ for some $X'$. By the way we constructed $F_{X'}$, there exists such a $Y' \subseteq Y$ that $Y'$ is the codomain of $f$.
	\end{enumerate}
\end{proof}

\begin{exercise}{3.4.8}
	Show that Axiom~3.5 (the axiom of pairwise union) can be deduced from Axiom~3.1 (sets are objects), Axiom~3.4 (singleton and pair sets), and Axiom~3.12 (the axiom of union).
\end{exercise}
\begin{proof}
	Let $A,B$ be two arbitrary sets. They are also objects as stated by Axiom~3.1. So according to the pair sets axiom, there exists a set $S=\{A,B\}$. By the axiom of union, we have a set $\bigcup S$ such that 
	\[
	\forall x(x \in \bigcup S \equiv \exists X(X \in S \wedge x \in X))
	\]
	
	Now we show that $Z$ is the set we want. That is, we prove, for all $x$, $x \in Z$ iff $x = A$ or $x = B$.
	\begin{enumerate}
		\item  If $x \in A \vee x \in B$, then $x$ is in one of the elements in $S$. So $x \in Z$.
		
		\item If $x \in \bigcup S$, then by definition there must exist at least $X \in S$ such that $x \in X$. This $X$ is either $A$ or $B$. So $x \in A \vee x \in B$ is true.
	\end{enumerate}
	
	$\bigcup S$ is therefore the set we want. 
\end{proof}

\begin{exercise}{3.4.9}
	Show that the definition of $\bigcap_{\alpha \in I} A_\alpha$, 
	\[
		\{x \in A_\beta : \forall \alpha(\alpha \in I \to x \in A_\alpha)\}
	\]
	, does not depend on the choice of $\beta$. That is,
	\[
		\{x \in A_\beta : \forall \alpha(\alpha \in I \to x \in A_\alpha)\} =
		\{x \in A_{\beta'} : \forall \alpha(\alpha \in I \to x \in A_\alpha)\}
	\]
	, for all $\beta,\beta' \in I$.
\end{exercise}
\begin{proof}
	By the axiom of specification, $x \in \{x \in X : Q(x)\}$ iff $x \in X \wedge Q(x)$. Therefore,
	$x \in \{x \in A_\beta : \forall \alpha(\alpha \in I \to x \in A_\alpha)\}$ iff $x \in A_\beta \wedge \forall \alpha(\alpha \in I \to x \in A_\alpha)$, and $x \in \{x \in A_{\beta'} : \forall \alpha(\alpha \in I \to x \in A_\alpha)\}$ iff $x \in A_{\beta'} \wedge \forall \alpha(\alpha \in I \to x \in A_\alpha)$.
	
	But $\beta, \beta' \in I$, so $\forall \alpha(\alpha \in I \to x \in A_\alpha)$ covers all the choices of them already. Hence, they are all equivalent to $\forall \alpha(\alpha \in I \to x \in A_\alpha)$, as desired.
\end{proof}

\begin{exercise}{3.4.10}
	Let $I$ and $J$ be sets. For all $\alpha \in I \cup J$, suppose there is destined a unique set $A_\alpha$. Show that
	\begin{enumerate}
		\item $(\bigcup_{\alpha \in I}A_\alpha) \cup (\bigcup_{\alpha \in J}A_\alpha) = \bigcup_{\alpha \in I \cup J}A_\alpha$.
		\item $(\bigcup_{\alpha \in I}A_\alpha) \cap (\bigcup_{\alpha \in J}A_\alpha) = \bigcup_{\alpha \in I \cap J}A_\alpha$.
	\end{enumerate}
\end{exercise}
\begin{proof}
	By definition, $x \in \bigcup_{\alpha \in I}A_\alpha$ iff $\exists \alpha(\alpha \in I \wedge x \in A_\alpha)$. And $x \in \bigcup_{\alpha \in J}A_\alpha$ iff $\exists \alpha(\alpha \in J \wedge x \in A_\alpha)$.
	
	Let predicates $P(x,\alpha) := \alpha \in I \wedge x \in A_\alpha$, $Q(x,\alpha) := \alpha \in J \wedge x \in A_\alpha$.
	
	Therefore, by the definition of union and intersection
	\begin{align*}
		&x \in (\bigcup_{\alpha \in I}A_\alpha) \cup (\bigcup_{\alpha \in J}A_\alpha) \\
		&\leftrightarrow \exists \alpha(P(x,\alpha)) \vee \exists \alpha(Q(x,\alpha))
	\end{align*}
	and
	\begin{align*}
		&x \in (\bigcup_{\alpha \in I}A_\alpha) \cap (\bigcup_{\alpha \in J}A_\alpha) \\
		&\leftrightarrow \exists \alpha(P(x,\alpha)) \wedge \exists \alpha(Q(x,\alpha))
	\end{align*}
	
	So we need to prove that
	\[
		 \exists\alpha(P(x,\alpha) \vee Q(x,\alpha)) \equiv \bigl[\exists \alpha(P(x,\alpha)) \vee \exists \alpha(Q(x,\alpha))\bigr]
	\]
	and that
	\[
		\exists\alpha(P(x,\alpha) \wedge Q(x,\alpha)) \equiv \bigl[\exists \alpha(P(x,\alpha)) \wedge \exists \alpha(Q(x,\alpha))\bigr]
	\]
	, whose proofs are quite straightforward. For example, we can assume that for some $\alpha_0$, $P(x,\alpha) \vee Q(x,\alpha)$. Then we can derive either $P(x,\alpha)$ or $Q(x,\alpha)$, and take any of the two, we can have the RHS.
\end{proof}

\begin{exercise}{3.4.11}
	Let $X, I \ne \emptyset$ be sets. For all $\alpha \in I$, let $A_\alpha$ denote a unique subset of $X$. Then,
	\begin{enumerate}
		\item $X \big\backslash\bigcup_{\alpha \in I} A_\alpha = \bigcap_{\alpha\in I}(X \setminus A_\alpha)$
		\item $X \big\backslash\bigcap_{\alpha \in I} A_\alpha = \bigcup_{\alpha\in I}(X \setminus A_\alpha)$
	\end{enumerate}
\end{exercise}
\begin{proof}
	Similar to what we did in doing \exerciseref{3.4.10}, for all $x$, let $P(x,\alpha) := x \in A_\alpha$, let $Q(x) := x \in X$, and let $R(\alpha) := \alpha \in I$.
	
	Then, we can translate the statements to, by the definition of difference, intersection, and union, that for all $x$,
	\begin{enumerate}
		\item $Q(x) \wedge \neg \exists\alpha\bigl(R(\alpha) \wedge P(x,\alpha)\bigr) \equiv \forall\alpha\Bigl(R(\alpha) \to \bigl(Q(x) \wedge \neg P(x,\alpha)\bigr)\Bigr)$.
		\item $Q(x) \wedge \neg \forall\alpha\bigl(R(\alpha) \to P(x,\alpha)\bigr) \equiv \exists\alpha\Bigl(R(\alpha) \wedge \bigl(Q(x) \wedge \neg P(x,\alpha)\bigr)\Bigr)$
	\end{enumerate}

	To prove them, first, observe that, $Q(x)$ does not depend on the choice of $\alpha$. And both sides of each of the two statements require $Q(x)$ to be true. (It makes sense, because $x$ has to be in $X$ to fall into the difference between $X$ and another set.) Therefore, we can simplify them to
	\begin{enumerate}
		\item $\neg \exists\alpha\bigl(R(\alpha) \wedge P(x,\alpha)\bigr) \equiv \forall\alpha\Bigl(R(\alpha) \to \bigl(\neg P(x,\alpha)\bigr)\Bigr)$.
		\item $\neg \forall\alpha\bigl(R(\alpha) \to P(x,\alpha)\bigr) \equiv \exists\alpha\Bigl(R(\alpha) \wedge \bigl(\neg P(x,\alpha)\bigr)\Bigr)$
	\end{enumerate}

	Recall that $\neg\exists a(\phi(a)) \equiv \forall a(\neg \phi(a))$ and that $\neg\forall a(\psi(a)) \equiv \exists a(\neg\psi(a))$. Th\-erefore, we only need to prove
	\begin{enumerate}
		\item $\neg\bigl( R(\alpha) \wedge P(x,\alpha) \bigr) \equiv \bigl( R(\alpha) \to \neg P(x,\alpha) \bigr)$.
		\item $\neg\bigl( R(\alpha) \to P(x,\alpha) \bigr) \equiv \bigl( R(\alpha) \wedge \neg P(x,\alpha) \bigr)$.
	\end{enumerate}
	, which are well established logical facts:
	\begin{enumerate}
		\item $\neg (p \wedge q) \equiv (p \to \neg q)$.
		\item $\neg (p \to q) \equiv (p \wedge \neg q)$.
	\end{enumerate}
\end{proof}

\section{Cartesian products}
\begin{exercise}{3.5.1}
	\begin{enumerate}
		\item
		Suppose we define ordered pairs using the Kuratowski definition: $(x,y) := \{\{x\}, \{x,y\}\}$. Show that this definition satisfies the property 3.5 (in the book) that we want all ordered pairs to have:
		\[
			(x,y) = (x',y') \hbox{ iff } x = x' \wedge y = y'
		\]
		
		\item
		Suppose we define ordered pairs this way instead (using what's called the short definition): $(x,y) := \{x, \{x,y\}\}$. Show that this definition also satisfies the above property.
		
		\item Show that, regardless of the definition of ordered pairs, (as long as they satisfy the property~3.5 and can show that given any $x,y$, $(x,y)$ indeed exists as a valid object), then there exists such a set, which we denote as $X \times Y$, that
		\[
			p \in (X \times Y) \hbox{ iff } p = (x,y) \hbox{ for some } x \in X, y \in Y
		\]
	\end{enumerate}
\end{exercise}
\begin{proof}
	\fbox{\em 1. If.} If $x = x' \wedge y = y'$, then $\{x\} = \{x'\}$ and $\{x,y\} = \{x',y'\}$, by Why~\ref{why.eq.singleton.sets} and Why~\ref{why.eq.pair.sets}. Using Why~\ref{why.eq.pair.sets} again, we have $\{\{x\}, \{x,y\}\} = \{\{x'\}, \{x',y'\}\}$.
	
	\fbox{\em 1. Only If.} Suppose $\{\{x\}, \{x,y\}\} = \{\{x'\}, \{x',y'\}\}$. First, we use the fact that $(x,y) \subseteq (x',y')$, which gives $\{x\} \in \{\{x'\}, \{x',y'\}\}$ and $\{x,y\} \in \{\{x'\}, \{x',y'\}\}$.
	
	By the definition of pair sets, $e \in \{a,b\}$ iff $e = a$ or $e = b$. Therefore,
	\begin{align*}
		&\{x\} \in \{\{x'\}, \{x',y'\}\} \\
		&\equiv \{x\} = \{x'\} \vee \{x\} = \{x',y'\} \\
		&\equiv x = x' \vee x = x' = y' \\
		&\to x = x'
	\end{align*}
	and
	\begin{equation}\label{eq.exer.3.5.1.1}
	\begin{aligned}
		&\{x,y\} \in \{\{x'\}, \{x',y'\}\} \\
		&\equiv \{x,y\} = \{x'\} \vee \{x,y\} = \{x',y'\} \\
		&\equiv x=y=x' \vee \{x,y\} = \{x',y'\} \\
	\end{aligned}
	\end{equation}
	In particular, we have $x = x'$. Because of this, we have $\{x,y\} = \{x',y\}$. Now if the second case of \eqref{eq.exer.3.5.1.1}, $\{x,y\} = \{x',y'\}$, is true, then we can conclude $\{x',y\} = \{x',y'\}$ and thus $y = y'$, as desired.
	
	However, if it is not the case, then $x=y=x'$ must be true instead. Therefore, we carry these two statements: $x = x'$ and $x=y=x'$ to investigate further.

	Now we consider the fact that $(x',y') \subseteq (x,y)$. This gives us
	\begin{align*}
		&\{x',y'\} \in \{\{x\}, \{x,y\}\} \\
		&\equiv \{x',y'\} = \{x\} \vee \{x',y'\} = \{x,y\} \\
		&\equiv x'=y'=x \vee \{x',y'\} = \{x,y\}
	\end{align*}
	If $x' = y' = x$, then because $x=y=x'$, we have $y = y'$, as desired. If $\{x',y'\} = \{x,y\}$, then because $x = x'$, we have $\{x,y'\} = \{x,y\}$, and hence $y = y'$, as desired.
	
	Therefore, whatever the case is, we always have $x = x'$ and $y = y'$.
	
	\fbox{\em 2. If.} If $x = x' \wedge y = y'$, then $\{x,y\} = \{x',y'\}$, by Why~\ref{why.eq.pair.sets}. Using Why~\ref{why.eq.pair.sets} again, we have $\{x, \{x,y\}\} = \{x', \{x',y'\}\}$.
	
	\fbox{\em 2. Only If.} Similar to what we did above, from $(x,y) \subseteq (x',y')$, we have
	\begin{equation}\label{eq.exer.3.5.1.2}
	\begin{aligned}
		&x \in \{x', \{x',y'\}\} \\
		&\equiv x = x' \vee x = \{x',y'\}
	\end{aligned}
	\end{equation}
	and
	\begin{equation}\label{eq.exer.3.5.1.3}
	\begin{aligned}
		&\{x,y\} \in \{x', \{x',y'\}\} \\
		&\equiv \{x,y\} = x' \vee \{x,y\} = \{x',y'\}
	\end{aligned}
	\end{equation}

	This is trickier, but we can still eliminate some of the four possibilities from further consideration: 
	
	Now we consider the other three possibilities.
	\begin{enumerate}
		\item Suppose the first case of \eqref{eq.exer.3.5.1.2} and the second case of \eqref{eq.exer.3.5.1.3} are true, that is $x = x'$ and $\{x,y\} = \{x',y'\}$, then we have $x = x' \wedge y = y'$, as desired.
		
		\item Suppose $x = x'$ and $\{x,y\} = x'$. Then, $\{x,y\} = x$. We then have $\{x,y\} \in \{x,y\}$. However, according to \exerciseref{3.3.2}, this is impossible.
		
		\item Suppose $x = \{x',y'\}$ and $\{x,y\} = x'$. We cannot immediately get anything useful.
		
		\item Suppose $x = \{x',y'\}$ and $\{x,y\} = \{x',y'\}$, the we have $x = \{x,y\}$ again, an impossible situation, the same as in (1).
	\end{enumerate}

	Wow, we have eliminated three possibilities and there's only one left now: $x = \{x',y'\} \wedge \{x,y\} = x'$.

	We now have to rely on the additional information: $(x',y') \subseteq (x,y)$.
	\begin{equation}\label{eq.exer.3.5.1.4}
		\begin{aligned}
			&x' \in \{x, \{x,y\}\} \\
			&\equiv x = x' \vee x' = \{x,y\}
		\end{aligned}
	\end{equation}
	and
	\begin{equation}\label{eq.exer.3.5.1.5}
		\begin{aligned}
			&\{x',y'\} \in \{x, \{x,y\}\} \\
			&\equiv \{x',y'\} = x \vee \{x',y'\} = \{x,y\}
		\end{aligned}
	\end{equation}
	Similarly, consider all the four situations:
	\begin{enumerate}
		\item Suppose the first case of \eqref{eq.exer.3.5.1.4} and the second case of \eqref{eq.exer.3.5.1.5} are true, that is $x = x'$ and $\{x',y'\} = \{x,y\}$, then we have $x = x' \wedge y'=y$, as desired.
		
		\item Suppose $x = x'$ and $\{x',y'\} = x$. Then, $\{x',y'\} = x'$. We then have $\{x',y'\} \in \{x',y'\}$. However, according to \exerciseref{3.3.2}, this is impossible.
		
		\item Suppose $x' = \{x,y\}$ and $\{x',y'\} = x$. We cannot immediately get anything useful.
		
		\item Suppose $x' = \{x,y\}$ and $\{x',y'\} = \{x,y\}$, the we have $x' = \{x',y\}$ again, an impossible situation, the same as in (1).
	\end{enumerate}

	Hence, we have $x = \{x',y'\} \wedge \{x,y\} = x'$ and $x' = \{x,y\} \wedge \{x',y'\} = x$ together as the only situation to consider. We see that two statements are redundant, and we eventually can still only have 
	\[
		x = \{x',y'\} \wedge \{x,y\} = x'
	\]
	Alright, we substitution $\{x,y\} = x'$ in the set $\{x',y'\}$ to get
	\[
		x = \{\{x,y\},y'\}
	\]
	Now consider the set $\{x,y\}$ and $\{\{x,y\},y'\}$. According to \exerciseref{3.3.2}, either $\{x,y\} \notin \{\{x,y\},y'\}$ or $\{\{x,y\},y'\} \notin \{x,y\}$. The former case is already false. But for the latter case, we have $\{\{x,y\},y'\} = x \in \{x,y\}$. Hence, this situation is impossible, again.

	Eventually, we are able to verify that only one situation is possible. And in that situation, we have $x = x'$ and $y = y'$, as desired.
	
	\fbox{\em 3.} Now we assume that for all $x,y$, the object $(x,y)$ exists. In addition, we assume that $(x,y) = (x',y')$ iff $x = x' \wedge y = y'$. We want to prove that, for any two sets $X,Y$, there exists such a set $X \times Y$ that contains exactly all such pairs $(x,y)$ that $x \in X, y \in Y$.
	
	That is,
	\begin{enumerate}
		\item For all $x$ and $y$, $x \in X \wedge y \in Y \to (x,y) \in X \times Y$.
		\item For all $p \in X \times Y$, there exists such $x \in X, y \in Y$ that $p = (x,y)$.
	\end{enumerate}

	If either $X$ or $Y$ is empty, then define $X \times Y := \emptyset$. Thus, the two statements are all vacuously true.
	
	Suppose now that $X$ and $Y$ are both non-empty. Let $x$ be any element in $X$. Define the set $Y_x$ as each element $y \in Y$ being replaced with $(x,y)$. We can do this using the axiom of replacement, because the statement ``$(x,y) = (x',y')$ iff $x = x' \wedge y = y'$'' ensures that the object $(x,y)$ is unique.
	
	Now, we replace each $x \in X$ with $Y_x$. Denote the result as $\Omega$. We finally define $X\times Y := \bigcup \Omega$. 
	
	We verify that $\bigcup \Omega$ satisfies the two statements.
	\begin{enumerate}
		\item If $x \in X \wedge y \in Y$, then, by the process we build $\Omega$ from, $(x,y) \in Y_x \in \Omega$. Therefore, by the axiom of union, $(x,y) \in \bigcup \Omega$.
		\item If $p \in \bigcup \Omega$, then by the axiom of union, there exists a $Y_x \in \Omega$ such that $p \in Y_x$, where $Y_x$ is replaced from some $x \in X$. By the definition of $Y_x$, we see that there exists some $y \in Y$ such that $p = (x,y)$, as desired.
	\end{enumerate}
\end{proof}

\begin{exercise}{3.5.2}
	Define an ordered $n$-tuple to be a surjective function $x : \{i \in \setn : 1 \le i \le n\} \to X$. We write the $i$\textsuperscript{th} item in the tuple as $x_i := x(i)$. Denote the function also as $(x_i)_{1 \le i \le n}$. 
	
	Show that 
	\begin{enumerate}
		\item $(x_i)_{1 \le i \le n} = (y_i)_{1 \le i \le n}$ iff $x_i = y_i$ for all $1 \le i \le n$.
		\item If $(X_i)_{1 \le i \le n}$ is an ordered $n$-tuple of sets, then the cartesian product defined in Definition 3.5.6 exists as a set.
	\end{enumerate}
\end{exercise}
\begin{proof}\leavevmode
	\begin{enumerate}
		\item We see that $(x_i)_{1 \le i \le n}$ and $(y_i)_{1 \le i \le n}$ have the same domain. Now we show that they have the same codomain and values iff $x_i = y_i$ for all $1 \le i \le n$.
		
		\myifbox
		First, because such a $n$-tuple function is surjective, the codomain of any such function is the function's image of the domain. For $x$ and $y$, they are $\{x_1, \dots, x_n\}$ and $\{y_1, \dots, y_n\}$, respectively. Since $x_i = y_i$ for all $1 \le i \le n$, they are equal.
		
		Their values are literally equal, as $x_i = y_i$ for all $1 \le i \le n$.
		
		\myoifbox
		If $x$ and $y$ have the same codomain and values, then, in particular, they have the same values. By the definition of function values, we have $x_i = y_i$ for all $1 \le i \le n$, as desired.
		
		\item If $(X_i)_{1 \le i \le n}$ exists as an ordered $n$-tuple of sets, then it means, by definition, then function
		\[
			X : \{i \in \setn : 1 \le i \le n\} \to \{X_1, \dots, X_n\}
		\]
		exists. In particular, the set $\{X_1, \dots, X_n\}$ exists. Denote it as $\Omega$.
		
		Now, by the axiom of union, we have $\bigcup \Omega$. By \exerciseref{3.4.7}, there exists a set $F$ that contains all partial functions from $\{i \in \setn : 1 \le i \le n\}$ to $\bigcup \Omega$.
		
		Let $Q(f)$ be a property pertaining to any partial function from $\{i \in \setn : 1 \le i \le n\}$ to $\bigcup \Omega$. Define $Q(f)$ to be true iff
		\begin{enumerate}
			\item $f$'s domain is $\{i \in \setn : 1 \le i \le n\}$, and
			\item $f(i) \in X_i$ for all $i$ in its domain. \label{exer.3.5.2.q.of.f.2}
		\end{enumerate}
	
		Using the axiom of specification, select all $f \in F$ that satisfies $Q(f)$. We show that the result set, denoted as $P$, satisfies Definition 3.5.6.
		
		Let $f$ be any element in $P$. Then, $Q(f)$ is true. Then, its domain is $\{i \in \setn : 1 \le i \le n\}$, so we can denote $f = (x_i)_{1 \le i \le n}$. Because of condition \eqref{exer.3.5.2.q.of.f.2}, we have $x_i \in X_i$ for all $1 \le i \le n$. Therefore, each element of $P$ is in the set specified by Definition~3.5.6.
		
		Let $(x_i)_{1 \le i \le n}$ be any object that is in the set specified by Definition~3.5.6. Then, $x_i$ is a partial function from $\{1 \le i \le n\}$ to $\bigcup \Omega$. And, by the definition, it satisfies $Q$. Hence, it is in the set $P$.
		
		We have shown that $P$ is the set we want.
	\end{enumerate}
\end{proof}

\begin{exercise}{3.5.3}
	Show that reflexivity, symmetry, and transitivity holds for the equality of
	\begin{enumerate}
		\item ordered pairs
		\item ordered $n$-tuples.
	\end{enumerate}
\end{exercise}
\begin{proof}\leavevmode
	\begin{enumerate}
		\item By definition, $(x,y) = (x',y')$ iff $x = x' \wedge y = y'$.
		
		\fbox{\em Reflexivity} This holds because $x = x \wedge y = y$.
		
		\fbox{\em Symmetry} This holds because $x = x' \leftrightarrow x' = x$ for any $x,x'$ (so it includes $y,y'$).
		
		\fbox{\em Transitivity} This holds because $x = x_1 \wedge x_1 = x_2$ gives $x = x_2$, for all $x,x_1,x_2$.
		
		\item By definition, an ordered $n$-tuple is a function. We have already verified the three properties of function equality in \exerciseref{3.3.1}.
	\end{enumerate}
\end{proof}

\begin{exercise}{3.5.4}
	Show that the Cartesian product is distributive for operations $\cup,\cap$, and $\setminus$. That is, for any sets $A,B,C$, we have
	\begin{enumerate}
		\item $A \times (B \cup C) = (A \times B) \cup (A \times C)$.
		\item $A \times (B \cap C) = (A \times B) \cap(A \times C)$.
		\item $A \times (B \setminus C) = (A \times B) \setminus (A \times C)$.
	\end{enumerate}
\end{exercise}
\begin{proof}\leavevmode
	Note that we will use De Morgan's rules on logical operations $\vee, \wedge$, and $\neg$.
	
	For all objects $x,y$, we have
	\begin{enumerate}
		\item 
		\begin{align*}
			(x,y) \in A \times (B \cup C) 
			&\equiv x \in A \wedge y \in (B \cup C) \\
			&\equiv x \in A \wedge (y \in B \vee y \in C) \\
			&\equiv (x \in A \wedge y \in B) \vee (x \in A \wedge y \in C) \\
			&\equiv ((x,y) \in A \times B) \vee ((x,y) \in A \times C) \\
			&\equiv (x,y) \in (A \times B) \cup (A \times C)
		\end{align*}
	
		\item 
		\begin{align*}
			(x,y) \in A \times (B \cap C) 
			&\equiv x \in A \wedge y \in (B \cap C) \\
			&\equiv x \in A \wedge (y \in B \wedge y \in C) \\
			&\equiv (x \in A \wedge y \in B) \wedge (x \in A \wedge y \in C) \\
			&\equiv ((x,y) \in A \times B) \wedge ((x,y) \in A \times C) \\
			&\equiv (x,y) \in (A \times B) \cap (A \times C)
		\end{align*}
	
		\item
		\begin{align}
			(x,y) \in A \times (B \setminus C) 
			&\equiv x \in A \wedge y \in (B \setminus C) \nonumber\\
			&\equiv x \in A \wedge (y \in B \wedge \neg (y \in C)) \nonumber\\
			&\equiv x \in A \wedge y \in B \wedge x \in A \wedge \neg (y \in C) \nonumber\\
			&\equiv (x \in A \wedge y \in B) \wedge (x \in A \wedge \neg y \in C) \label{eq.exer.3.5.4.1}
		\end{align}
		We would want $(x \in A \wedge \neg y \in C)$ to become $\neg (x \in A \wedge y \in C)$, but we could not do this alone, without considering the statement we have, \eqref{eq.exer.3.5.4.1}, as a whole. For it, we have:
		\begin{enumerate}
			\item If $x \in A$, then the statement \eqref{eq.exer.3.5.4.1} is true iff $y \in B \wedge \neg y \in C$.
			\item If $x \notin A$, then the statement is false.
		\end{enumerate}
		
		Now consider the statement we want:
		\begin{equation}
			(x \in A \wedge y \in B) \wedge \neg(x \in A \wedge y \in C) \label{eq.exer.3.5.4.2}
		\end{equation}
		For it, we have
		\begin{enumerate}
			\item If $x \in A$, then the statement \eqref{eq.exer.3.5.4.2} is true iff $y \in B \wedge \neg y \in C$.
			\item If $x \notin A$, then the statement is false.
		\end{enumerate}
	
		Therefore, we have demonstrated $\eqref{eq.exer.3.5.4.1} \equiv \eqref{eq.exer.3.5.4.2}$. We expand it further:
		\begin{align*}
			&(x \in A \wedge y \in B) \wedge \neg(x \in A \wedge y \in C) \\
			&\equiv (x,y) \in A \times B \wedge \neg\bigl((x,y) \in A \times C\bigr) \\
			&\equiv (x,y) \in (A \times B) \setminus (A \times C)
		\end{align*}
		, as desired.
	\end{enumerate}
\end{proof}

\begin{exercise}{3.5.5}
	Let $A,B,C,D$ be sets.
	\begin{enumerate}
		\item Show that $(A \times B) \cap (C \times D) = (A \cap C) \times (B \cap D)$		
		\item Is it also true that $(A \times B) \cup (C \times D) = (A \cup C) \times (B \cup D)$?
		\item Is it also true that $(A \times B) \setminus (C \times D) = (A \setminus C) \times (B \setminus D)$?
	\end{enumerate}
\end{exercise}
\begin{proof}\leavevmode
	\begin{enumerate}
		\item 
		\begin{align*}
			(x,y) \in (A \times B) \cap (C \times D) 
			&\equiv (x,y) \in (A \times B) \wedge (x,y) \in (C \times D) \\
			&\equiv (x \in A \wedge y \in B) \wedge (x \in C \wedge y \in D) \\
			&\equiv (x \in A \wedge x \in C) \wedge (y \in B \wedge y \in D) \\
			&\equiv x \in A \cap C \wedge y \in B \cap D \\
			&\equiv (x,y) \in (A \cap C) \times (B \cap D)
		\end{align*}
	
		\item No. $(x,y) \in (A \cup C) \times (B \cup D)$ includes the case when $x \in C \wedge y \in B$. If $A \cap C = \emptyset$ and $B \cap D = \emptyset$, then $(x,y)$ is in neither $A \times B$ and $C \times D$.
		
		\item No. For $(x,y)$ to be in $(A \times B) \setminus (C \times D)$, we have $(x,y) \notin C \times D$. That is, $x \notin C \vee y \notin D$. However, for $(x,y)$ to be in $(A \setminus C) \times (B \setminus D)$, we must have $x \notin C \wedge y \notin D$.
	\end{enumerate}
\end{proof}

\begin{exercise}{3.5.6}
	Let $A,B,C,D$ be non-empty sets. Show that
	\begin{enumerate}
		\item $A \times C \subseteq B \times D$ iff $A \subseteq B$ and $C \subseteq D$.
		\item $A \times C = B \times D$ iff $A = B$ and $C = D$.
	\end{enumerate}

	What if some of them are empty?
\end{exercise}
\begin{proof}\leavevmode
	\begin{enumerate}
		\item 
		\myifbox Suppose $A \subseteq C$ and $B \subseteq D$, then 
		\begin{align*}
			(x,y) \in A \times B 
			&\to x \in A \wedge y \in B \\
			&\to x \in C \wedge y \in D \\
			&\to (x,y) \in C \times D
		\end{align*}, 
		which means $A \times B \subseteq C \times D$.
		
		\myoifbox
		Suppose $A \times B \subseteq C \times D$. Suppose for the sake of contradiction that $A \subseteq C \wedge B \subseteq D$ is not true. This means that either $A \subsetneq C$ or $B \subsetneq D$.
		
		We only consider when $A \nsubseteq C$, the other situation is handled similarly. Then, $\exists x(x \in A \wedge x \notin C)$. Because $B$ is non-empty, we can choose some $y \in B$. 
		
		Therefore, we have the object $(x,y)$. By how $x$ and $y$ are chosen, we have $(x,y) \in A \times B$. Because our premise, we have $(x,y) \in C \times D$. However, by the definition of Cartesian products, this means $x \in C$, a contradiction.
	
		\fbox{\em What If some are not empty?} Then the statement does not hold. For example, let $B = C = \emptyset$, and let $A,D$ be non-empty. Then we have $A \times C = \emptyset \subseteq B \times D = \emptyset$, but obviously $A \subsetneq B$.
		
		\item 
		\myifbox Suppose $A = C$ and $B = D$, then 
		\begin{align*}
			(x,y) \in A \times B 
			&\equiv x \in A \wedge y \in B \\
			&\equiv x \in C \wedge y \in D \\
			&\equiv (x,y) \in C \times D
		\end{align*}, 
		as desired.
		
		\myoifbox
		Suppose $A \times B = C \times D$. Suppose for the sake of contradiction that $A = C \wedge B = D$ is not true. This means that either $A \ne C$ or $B \ne D$.
		
		We only consider when $A \ne C$, the other situation is handled similarly. Then, there exists such a $x$ that
		\begin{enumerate}
			\item $x \in A \wedge x \notin C$, or \label{exer.3.5.6.case.1}
			\item $x \in C \wedge x \notin A$. \label{exer.3.5.6.case.2}
		\end{enumerate}
		For case \eqref{exer.3.5.6.case.1}, we choose $y \in B$. For case \eqref{exer.3.5.6.case.2}, we choose $y \in D$. These can all be done as non of the sets is empty.
	
		Therefore, we have the object $(x,y)$. By how $x$ and $y$ are chosen, we have $(x,y) \in A \times B$ for case \eqref{exer.3.5.6.case.1}, $(x,y) \in C \times D$ for case \eqref{exer.3.5.6.case.2}. 
		
		Because $A \times B = C \times D$, in either case we have $(x,y) \in A \times B = C \times D$. However, by the definition of Cartesian products, this means $x$ is in both $A$ and $C$, a contradiction.
		
		\fbox{\em What If some are not empty?} Then the statement does not hold. For example, let $B = C = \emptyset$, and let $A,D$ be non-empty. Then we have $A \times C = \emptyset = B \times D = \emptyset$, but obviously $A \ne B$.
\end{enumerate}
\end{proof}

\begin{exercise}{3.5.7}
	Let $X,Y$ be sets. Define $\pi_{X\times Y \to X}: (x,y) \mapsto x$ and $\pi_{X\times Y \to Y}: (x,y) \mapsto y$.
	
	Show that, for all set $Z$ and functions $f: Z \to X$, $g: Z \to Y$, there exists such a unique function $h: Z \to X \times Y$, that $\pi_{X\times Y \to X} \circ h = f$ and $\pi_{X\times Y \to Y} \circ h = y$.
\end{exercise}
\begin{proof}
	\fbox{\em Existence.} For all $t \in Z$, define $h(t) := (f(t),y(t))$. Because $f(t) \in X, g(t) \in Y$, we have $h(t) \in X \times Y$.
	
	Therefore, $h$ is well defined. We have
	\[
	(\pi_{X\times Y \to X} \circ h)(t) = \pi_{X\times Y \to X}((f(t),y(t))) = f(t)
	\]
	and
	\[
	(\pi_{X\times Y \to Y} \circ h)(t) = \pi_{X\times Y \to Y}((f(t),y(t))) = y(t)
	\]
	, as desired.

	\fbox{\em Uniqueness.} We know that $h: t \mapsto (f(t),y(t))$ is such a $h$. Let $h'$ be another function that satisfies the requirements. Because the codomain of $h'$ is $X \to Y$, we can write $h(t) = (x,y)$ for some $x \in X, y \in Y$.
	
	Then,
	\[
		(\pi_{X\times Y \to X} \circ h')(t) = f(t) \to x = f(t)
	\]
	and
	\[
		(\pi_{X\times Y \to Y} \circ h')(t) = g(t) \to y = g(t)
	\]
	
	By the property of ordered pair, since the two elements are all equal, we must have $(x,y) = (f(t),g(t))$. Hence, $h(t) = h'(t)$ for all $t \in Z$, as desired.
\end{proof}

\begin{exercise}{3.5.8}
	Let $X_1, \dots, X_n$ be sets. Show that the Cartesian product defined in Definition 3.5.6, $\prod_{i=1}^{n}X_i$ is empty iff for some $i$, $X_i$ is empty.
\end{exercise}
\begin{proof}
\myifbox Suppose for some $i, X_i = \emptyset$, then for every ordered $n$-tuple $(x_i)_{1 \le i \le n}$, the statement 
\[
x_i \in X_i \hbox{ for all } 1 \le i \le n
\]
is always false. This by definition means that all elements does not in $\prod_{i=1}^{n}X_i$, and hence it is empty.

\myoifbox Suppose $\prod_{i=1}^{n}X_i = \emptyset$. Suppose for the sake of contradiction that $X_i \ne \emptyset$ for all $1 \le i \le n$. 

Then, according to the lemma of finite choice (Lemma~3.5.11), there exists a $n$-tuple $(x_i)_{1 \le i \le n}$, such that $x_i \in X_i$. By definition, this $n$-tuple should be an element of $\prod_{i=1}^{n}X_i = \emptyset$, a contradiction.
\end{proof}

\begin{exercise}{3.5.9}
	Let $I,J$ be two sets. For all $\alpha \in I$, let there be a (unique) set $A_\alpha$. For all $\beta \in J$, let there be a (unique) set $B_\beta$. Then,
	\[
		(\bigcup_{\alpha \in I}A_\alpha) \cap (\bigcup_{\beta \in J}B_\beta) = 
		\bigcup_{(\alpha,\beta) \in I \times J}(A_\alpha \cap B_\beta)
	\]
	
	What happens if we interchange the $\cup$ and $\cap$ symbols?
\end{exercise}
\begin{proof}
	Let $x$ be any object. We have
	\begin{align*}
		&x \in (\bigcup_{\alpha \in I}A_\alpha) \cap (\bigcup_{\beta \in J}B_\beta) \\
		&\equiv x \in \bigcup_{\alpha \in I}A_\alpha \wedge x \in \bigcup_{\beta \in J}B_\beta \\
		&\equiv \exists \alpha(\alpha \in I \wedge x \in A_\alpha) \wedge \exists \beta(\beta \in J \wedge x \in B_\beta) \\
		&\equiv \exists\alpha\exists\beta(\alpha \in I \wedge \beta \in J \wedge x \in A_\alpha \wedge x \in B_\beta) \\
		&\equiv \exists(\alpha,\beta)\,\bigl((\alpha,\beta) \in I \times J \wedge x \in A_\alpha \wedge  x \in B_\beta\bigr) \\
		&\equiv x \in \bigcup_{(\alpha,\beta) \in I \times J}(A_\alpha \cap B_\beta)
	\end{align*}
	, as desired. \hfill \qedsymbol
	
	If we interchange $\cap$ and $\cup$, then, we show that the statement still holds.
	
	\begin{enumerate}
		\item
		Suppose \[x \in (\bigcap_{\alpha \in I}A_\alpha) \cup (\bigcap_{\beta \in J}B_\beta)\].
		
		We see that $x$ has to be in the intersection of all $A_\alpha$ or the intersection of all $B_\beta$. We assume the first case, and the second case can be handled similarly. Then, for all $\alpha \in I$, we have $x \in A_\alpha$. So $x \in A_\alpha \cup B_\beta$ is also true. If $(\alpha, \beta) \in I \times J$, then we must have $\alpha \in I$, so we have what we want.
		
		\item Suppose \[x \in \bigcap_{(\alpha,\beta) \in I \times J}(A_\alpha \cup B_\beta)\].
		
		Suppose for the sake of contradiction that 
		\[x \notin (\bigcap_{\alpha \in I}A_\alpha) \cup (\bigcap_{\beta \in J}B_\beta)\]
		is not true.
		
		Then,
		\[
			\exists x(x \notin \bigcap_{\alpha \in I}A_\alpha) \wedge x \notin (\bigcap_{\beta \in J}B_\beta)
		\]
		That means, for some $\alpha \in I$ and some $\beta \in J$, we have $x \notin A_\alpha$ and $x \notin B_\beta$. Hence, we know that $x \notin A_\alpha \cup B_\beta$ for this $\alpha$ and $\beta$, a contradiction.
	\end{enumerate}
\end{proof}

\begin{exercise}{3.5.10}
	Let $f: X \to Y$ be a function. Define the \emph{graph} of $f$ to be the set (using the axiom of replacement on the set $X$)
	\[
		\{x \in X : \bigl(x,f(x)\bigr)\}
	\]
	, which, since $f(x) \in Y$, is a subset of $X \times Y$.
	
	Show that
	\begin{enumerate}
		\item Two functions $f,\tilde{f} : X \to Y$ are equal iff they have the same graph.
		\item Conversely, let $G$ be any subset of $X \times Y$. If $G$ satisfies this property that for all $x \in X$, the set $\{y \in Y: (x,y) \in G\}$ (constructed using the axiom of replacement on $Y$ and the axiom of specification on the result) contains exactly one element, then there exists a unique function $f: X \to Y$ whose graph is equal to $G$.
		\item We can define a function to be an ordered triple, $(X,Y,G)$, where $X,Y$ are sets, and $G$ is a subset of $X \times Y$ that satisfies the above property. If we define $f$ this way given this triple: $X$ is its domain, $Y$ is its codomain, and for all $x \in X$, define $f(x) := y$ where $(x,y) \in G$.
		
		Then, the definition is compatible with Definition~3.3.1, and hence is compatible with Definition~3.3.8.
	\end{enumerate}
\end{exercise}
\begin{proof}\leavevmode
	\begin{enumerate}
		\item 
		Denote the graph of $f$ as $G_f$, and that of $\tilde{f}$ as $G_{\tilde{f}}$.
		
		\myifbox Suppose $f = \tilde{f}$. Then, for all $x \in X$, $f(x) = \tilde{f}(x)$. Hence, $(x,f(x)) = (x,\tilde{f}(x))$. Therefore, each $(x,f(x))$ in $G_f$ equals to some $(x,\tilde{f}(x))$ in $G_{\tilde{f}}$, and vice versa. Thus, $G_f = G_{\tilde{f}}$.
		
		\myoifbox Suppose $G_f = G_{\tilde{f}}$. Then for all element $(x,f(x)) \in G_f$, we see that $(x,f(x)) \in G_{\tilde{f}}$. By the definition of $G_{\tilde{f}}$, we see that $(x,f(x))$ has to equal to $(x,\tilde{f}(x))$. By the property of ordered pairs, we must have $f(x) = \tilde{f}(x)$.
		
		Because this works for all elements in $G_f$, we see that $x$ can take any value in $X$. Therefore, $f(x) = \tilde{f}(x)$ for all $x \in X$, and the two functions are equal.
		
		\item For all $x \in X$, define $f(x) := y$ such that $(x,y) \in G$. By how $G$ is defined, we see that $f$ satisfies the vertical line test used in Definition~3.3.1. Because for every $x \in X$, $f$ is defined to be some value $y \in Y$, we see that $f: X \to Y$ is a valid function. By how we constructed $f$, we see that $G$ is indeed its graph.
		
		Now we prove that $f$ is unique. Suppose another $f'$ also has $G$ as its graph. Then, for all $x \in X$, we must have $f'(x) = y$. Because $y$ is unique, we see that $f'(x) = y = f(x)$. Hence, $f$ and $f'$ have the same values, and because they also have the same domain and codomain, they are thus equal.
		
		\item Here $P(x,y)$ is true iff $(x,y) \in G$. By the definition of $G$, $P(x,y)$ satisfies the vertical line test. Because $G$ is a subset of $X \times Y$, we have $\forall x(x \in X \to y \in Y)$. Then, $X$ and $Y$ are indeed valid domain and codomain. (Note that passing the vertical line test implies that $f$ is defined for all $x \in X$.) Hence, the definition is compatible with all the conditions in Definition~3.3.1.
	\end{enumerate}
\end{proof}

\begin{exercise}{3.5.11}
	Treating Lemma~3.4.10 as an axiom, prove the power set axiom.
	
	This is already done in \exerciseref{3.4.6} (ii). However, this time, we have some better tools. Given any two objects $x,y$, we now know the existence of ordered pair $(x,y)$, thanks to \exerciseref{3.5.1} (i) and (ii). Also, given any two sets $X,Y$, we now know the existence of $X \times Y$, thanks to \exerciseref{3.5.1} (iii).
	
	With these new tools, we can drastically simplify the proof using Prof.~Tao's hint, where it once was quite tricky. However, do note that it did took quite some efforts to create these tools, too.
\end{exercise}
\begin{proof}
	Let $X$ and $Y$ be any set.
	
	By \exerciseref{3.5.1} (iii), the set $X \times Y$ exists. By Lemma~3.4.10, the set $2^{X \times Y}$ exists. Using the axiom of specification, we select all elements in $2^{X \times Y}$ that satisfies the vertical line test, and denote the result as $\Omega$. Therefore, $G \in \Omega$ iff $G \subseteq X \times Y$ and $G$ satisfies the vertical line test.
	
	According to \exerciseref{3.5.10} (ii), for each such $G$, there exists such a unique function $f : X \to Y$ whose graph is $G$. Because it is unique, we can use the axiom of replacement to replace each $G \in \Omega$ with this $f$. We then obtained a set $F$ in which all elements are functions from $X$ to $Y$.
	
	Now, we show that any function from $X$ to $Y$ is also in $F$. Let $f$ be any such function. Define $G_f := \{x \in X: (x,f(x))\}$, using the axiom of replacement on $X$. It is clear that $G_f \subseteq X \times Y$ and $G_f$ satisfies the vertical line test, since $f$ is a function.
	
	Therefore, $G_f \in \Omega$. But we are not finished yet. We need to show that $f \in F$. Clearly, $f$ satisfies the condition of the replacement: $f$ is from $X$ to $Y$ and has $G$ as its graph. Because the replacement condition must give a unique function, we must have $f$ as the element in $F$ that is replaced from $G_f$, as desired.
	
	Finally, we can say that $F$ is the set we want.
\end{proof}

\begin{exercise}{3.5.12}	
	Note that there is a typo in the book, which Prof.~Tao pointed out in his errata: $a$ should be a function from $\setn$, instead of from $X$.
	
	Prove Proposition~2.1.16, which was then informally proven. 
	
	That is, for any function $f: \setn \times X \to X$, there exists a unique function $a: \setn \to X$ such that
	\begin{align}
		a(0) &= c \in X \label{exer.3.5.12.cond.1}\\
		a(\successor{n}) &= f(n,a(n)), \hbox{ for all } n \in \setn \label{exer.3.5.12.cond.2}
	\end{align}

	Prove the statement in these two ways:
	\begin{enumerate}
		\item I am allowed to use all the properties that have been derived so far about natural numbers. Addition, order, and multiplication. However, this, strictly, introduces circularity, because addition is defined using recursive definition (Proposition~2.1.16). Then, order is defined using addition, and multiplication is defined using both addition and recursive definition.
		
		\item Prove it without using any of these properties that may introduce circularity. 
	\end{enumerate}
\end{exercise}

\noindent\fbox{\em The first way.}
\begin{proof}
	I asked Prof.~Tao about this exercise, because I did not know why we had to start from the partial functions $a_N$. According to Prof.~Tao, it is because the statement in Proposition~2.1.16 cannot be written formally in first order logic.
	
	I have made an attempt to do so:
		
	\begin{equation}
		\forall n\bigg(n \in \setn \to \exists!a_n\Bigl[\bigl(n = 0 \to a_n = c\bigr) \wedge \bigl(\exists b(\successor{b} = n) \to a_n = f_n(a_b)\bigr)\Bigr]\bigg) \label{prop.2.1.16.formal.stat.1}
	\end{equation}
	
	, in which we cannot formally define $a_b$.
	
	Hence, I use Prof.~Tao's hint to prove that, for all natural numbers $N$, there exists a unique function $a_N : \{n \in \setn : n \le N\} \to X$ such that the conditions \eqref{exer.3.5.12.cond.1} and~\eqref{exer.3.5.12.cond.2} hold, if we replace the $a$ there with this $a_N$ and let $n \le N$ for \eqref{exer.3.5.12.cond.2}.
	
	\fbox{\em Existence of partial functions.} We induct on $N$, to show only the existence of such a function for now.
	
	\mybcbox When $N = 0$, the domain of $a_N$ becomes $\{0\}$, because for all numbers $n$, we have $n = 0 + n$, hence by definition $0 \le n$. If $n \ne 0$, then $0 < n$. So $0$ is the only element in the domain. Define $a_0: \{0\} \to \{c\}$. Clearly, it satisfies the conditions \eqref{exer.3.5.12.cond.1} and~\eqref{exer.3.5.12.cond.2} for $n \le 0$.
	
	\myisbox Suppose that the statement's been proven for some $N$. Define $a_{\successor{N}}$ as follows:
	\begin{enumerate}
		\item $a_{\successor{N}}(n) = a_N(n)$, if $n \le N$.
		\item $a_{\successor{N}}(\successor{N}) = f(N,a_{\successor{N}}(N))$.
	\end{enumerate}
	By the inductive hypothesis, $a_{\successor{N}}(n)$ satisfies the conditions if $n \le N$. Now the only element to consider is $n = \successor{N}$, which by definition satisfies the condition \eqref{exer.3.5.12.cond.2}.
	
	We can now close the induction. \hfill \qedsymbol
	
	\fbox{\em Uniqueness of partial functions.} Once we know such functions exists, we induct on $N$, to show the uniqueness of such functions for each $N$.
	
	\mybcbox If $N = 0$, suppose there is some $a_0'$ that also satisfies the conditions \eqref{exer.3.5.12.cond.1} and~\eqref{exer.3.5.12.cond.2}. Then we must have $a_0'(0) = c = a_0(0)$. Since $0$ is the only element in the domain, we have the two functions equal.
	
	\myisbox Consider any partial function $a_{\successor{N}}$ that satisfies the conditions \eqref{exer.3.5.12.cond.1} and~\eqref{exer.3.5.12.cond.2} for $n \le \successor{N}$.
	
	We restrict its domain to $\{n \in \setn : n \le N\}$. Clearly, the restricted function satisfy the conditions \eqref{exer.3.5.12.cond.1} and~\eqref{exer.3.5.12.cond.2} when $n \le N$. Hence, by our inductive hypothesis, it is the only function from $\{n \in \setn : n \le N\}$ to $X$ that satisfies the conditions. This means for any $n \le N$, $a_{\successor{N}}(n)$ can only have a unique value.
	
	By condition \eqref{exer.3.5.12.cond.2}, we must have $a_{\successor{N}}(\successor{N}) = f(N,a_{\successor{N}}(N))$, another unique value, since $f$ is a function and $a_{\successor{N}}(N)$ is unique. Therefore, for any $n \le \successor{N}$, $a_{\successor{N}}(n)$ can only take a corresponding unique value. This proves the uniqueness of $a_{\successor{N}}$.
	
	We can now close the induction. \hfill \qedsymbol
	
	Once we have defined the unique $a_N$'s for all $N$, our previous statement \eqref{prop.2.1.16.formal.stat.1} finally becomes valid, if we rewrite it using $a_N$'s this way (note that we use the symbol $m_n$ here for the unique number to avoid conflict with the function names, and the subscript of $f$ in 2.1.16 becomes its first variable):
	\begin{equation}
		\forall n\bigg(n \in \setn \to \exists!m_n\Bigl[\bigl(n = 0 \to m_n = c\bigr) \wedge \bigl(\exists b(\successor{b} = n) \to m_n = f(b,a_b(b))\bigr)\Bigr]\bigg) \label{prop.2.1.16.formal.stat.2}
	\end{equation}
	To prove this statement, for each $n$, set the corresponding $m_n := a_n(n)$. By the property of functions, $m$ is unique. By the definition of $a_n$, we have 
	\begin{enumerate}
		\item If $n = 0$, then $m_n = a_0(0) = c$.
		\item If $n = \successor{b}$ for some $b$, then $m_n = a_{\successor{b}}(\successor{b}) = f(b,a_{\successor{b}}(b)) = f(b,a_{b}(b)) = f(b,m_b)$, as desired.
	\end{enumerate}
	Hence, we have finally proven Proposition~2.1.16 formally. Note that, if we change the codomain of the $f_n$ there to any set $X$, then we will have $m_n \in X$ instead of $\setn$.
	
	To prove the statement in our exercise, define $a: \setn \to X,\ n \mapsto m_n$. By the definition of $m_n$, we see that $a$ satisfies the conditions. 
	
	Now we show that $a$ is unique. If there's another function $a'$ that satisfies the conditions for all $n \in \setn$, then we can inductively prove that $a'(n) = m_n$ for all $n$. Hence, $a'(n) = m_n = a(n)$, and the two functions are equal.
\end{proof}

While the above prove may seem sound, it is actually circular. This is because we have used the order of natural numbers, which depends on addition, which in turn depends on this theorem of recursive definition.

It is why Prof.~Tao asked us to prove it using only the Peano axioms. (Actually, we can use other propositions, like Lemma~2.2.10, if they don't depend on the recursive theorem.)

\noindent\fbox{\em The second way.}
The first place where we use the order of natural numbers is in the domain of every $a_N$. Therefore, we must create some new sets as domains that do not depend on the order.

Using Prof.~Tao's hint, I show that, 
\begin{lem}\label{my.lem.exer.3.5.12}
	For every natural number $N$, we have unique sets $A_N,B_N$, such that (That is, there exists such sets, and for all such sets (in paris) that satisfy the following conditions, they must respectively equal to $A_N$ and $B_N$.) 
	\begin{enumerate}
		\item $A_N, B_N \subseteq \setn$
			\label{exer.3.5.12.2nd.cond.1}
		\item $A_N \cap B_N = \emptyset$. 
			\label{exer.3.5.12.2nd.cond.2}
		\item $A_N \cup B_N = \setn$. 
			\label{exer.3.5.12.2nd.cond.3}
		\item $0 \in A_N$. 
			\label{exer.3.5.12.2nd.cond.4}
		\item $\successor{N} \in B_N$. 
			\label{exer.3.5.12.2nd.cond.5}
		\item For all $n$, if $n \in B_N$, then $\successor{n} \in B_N$. 
			\label{exer.3.5.12.2nd.cond.6}
		\item For all $n$, if $n \in A_N \wedge n \ne N$, then $\successor{n} \in A_N$. 
			\label{exer.3.5.12.2nd.cond.7}
	\end{enumerate}
\end{lem}
\begin{proof}
	We induct on $N$.
	
	\mybcbox Set $A_0 := \{0\}$ and $B_0 = \setn \setminus \{0\}$. Obviously, they satisfy the conditions \ref{exer.3.5.12.2nd.cond.1}--\ref{exer.3.5.12.2nd.cond.5}.
	
	For condition \ref{exer.3.5.12.2nd.cond.6}, note that, $\successor{n} \ne 0$, by Axiom~2.3. By the definition of $B_0$, we thus have $\successor{n} \in B_0$. For condition \ref{exer.3.5.12.2nd.cond.7}, it is vacuously true.
	
	\textbf{Now we show that $A_0$ and $B_0$ are unique.}%
	% A_0,B_0 will be \mathcal_{A}_0,\mathcal{B}_0 within this group	
	\begingroup
	\def\azro{{\cal A}_0}%
	\def\bzro{{\cal B}_0}%
	We show that, for all pairs of sets $\azro,\bzro$ that satisfy such conditions, we have, for all $n \in \setn$, $n \in \bzro$ iff $n \ne 0$, by inducting on $n$.
	\begin{enumerate}
		\item \mybcbox When $n = 0$. The \myifbox part is vacuously true. For the \myoifbox part, note that $0 \in \azro$ by condition \ref{exer.3.5.12.2nd.cond.4}. Hence, by condition \ref{exer.3.5.12.2nd.cond.2}, we see that $n \in \bzro \to n \ne \azro \to n \ne 0$.
		
		\item \myisbox Suppose for some $n$, we already have $n \in \bzro$ iff $n \ne 0$. We either have 
		\begin{enumerate}
			\item $n \in \bzro$. Then, by the inductive hypothesis, $n \ne 0$. By condition \ref{exer.3.5.12.2nd.cond.6}, we have $\successor{n} \in \bzro$. By Axiom~2.3, we have $\successor{n} \ne 0$. Therefore, the iff statement is true because both sides are true.
			
			\item $n \ne \bzro$. Then, by the inductive hypothesis, we have $\false \leftrightarrow n \ne 0$. So we must have $n \ne 0$ to be $\false$, and $n = 0$. Hence, by condition \ref{exer.3.5.12.2nd.cond.5}, we have $\successor{n} = \successor{0} \in \bzro$. By Axiom~2.3, we have $\successor{n} \ne 0$. Therefore, the iff statement is true because both sides are true.
		\end{enumerate} 
	\end{enumerate}

	Therefore, for all such $\bzro$, we have $n \in \bzro$ iff $n \ne 0$. That is, $\bzro = \{n \in \setn : n \ne 0\}$, which is unique, thanks to the axiom of specification. 
	
	Now we show that $\azro$ is also unique. Recall the conditions \ref{exer.3.5.12.2nd.cond.2} and \ref{exer.3.5.12.2nd.cond.3}: with them and \exerciseref{3.1.9}, we must have $\azro = \setn \setminus \bzro$. As we proved that $\bzro$ is unique, $\azro$ must also be unique.
	\endgroup
	
	\myisbox Suppose for some $N$ we have unique sets $A_N,B_N$ that satisfy the above conditions \ref{exer.3.5.12.2nd.cond.1}--\ref{exer.3.5.12.2nd.cond.7}. We define
	\begin{equation}
		A_{\successor{N}} := A_N \cup \{\successor{N}\}; \quad B_{\successor{N}} := \setn \setminus A_{\successor{N}} \label{eq.3.5.12.relation.an.bn}
	\end{equation}
	
	and try to show that $A_{\successor{N}},B_{\successor{N}}$ also satisfy the conditions.
	
	By definition, condition \ref{exer.3.5.12.2nd.cond.1} without the uniqueness is obviously true for them.
	
	Let $n$ be any natural number. By our inductive hypothesis and conditions \ref{exer.3.5.12.2nd.cond.1}, \ref{exer.3.5.12.2nd.cond.2}, we have two such situations that at least and only one of them can be true:
	\begin{enumerate}
		\item $n \in A_N$.
		\item $n \in B_N$.
	\end{enumerate}
	If we add condition \ref{exer.3.5.12.2nd.cond.5} into consideration, we can have three such situations that at least and only one of them can be true:
	\begin{enumerate}
		\item $n \in A_N$.
		\item $n = \successor{N}$.
		\item $n \in B_N \setminus \{\successor{N}\}$.
	\end{enumerate}
	For the first two, we have $n \in A_N \cup \{\successor{N}\} =: A_{\successor{N}}$. For the third one, we have $n \in B_N \setminus \{\successor{N}\} =: B_{\successor{N}}$. Since at least and only one of them must be true, we see that $A_{\successor{N}}$ and $B_{\successor{N}}$ are disjoint, the condition \ref{exer.3.5.12.2nd.cond.2}.
	
	By their definition and the inductive hypothesis, \ref{exer.3.5.12.2nd.cond.3} and \ref{exer.3.5.12.2nd.cond.4} are clearly true.
	
	By the inductive hypothesis and condition \ref{exer.3.5.12.2nd.cond.5}, we have $\successor{N} \in B_N$. By \ref{exer.3.5.12.2nd.cond.6}, we have $\successor{(\successor{N})} \in B_N$. By Axiom 2.3 and~2.4, we have $\successor{(\successor{N})} \ne \successor{N}$. Therefore, $\successor{(\successor{N})} \in B_N \setminus \{\successor{N}\} =: B_{\successor{N}}$. Therefore, condition \ref{exer.3.5.12.2nd.cond.5} is true.
	
	By definition, if $n \in B_{\successor{N}}$, then $n \in B_N$. By the inductive hypothesis, \ref{exer.3.5.12.2nd.cond.6} is clearly true.
	
	If $n \in A_{\successor{N}} \wedge n \ne \successor{N}$, then by definition, $n \in A_N$. We have two situations:
	\begin{enumerate}
		\item $n = N$, then $\successor{n} = \successor{N} \in A_{\successor{N}}$.
		\item $n \ne N$, then by condition \ref{exer.3.5.12.2nd.cond.7} and the inductive hypothesis, we have $\successor{n} \in A_N \in A_{\successor{N}}$.
	\end{enumerate}
	Therefore, in all cases we have condition \ref{exer.3.5.12.2nd.cond.7}.
	
	We have proved all the conditions \ref{exer.3.5.12.2nd.cond.1}--\ref{exer.3.5.12.2nd.cond.7} for $A_{\successor{N}}$ and $B_{\successor{N}}$. 
	
	\textbf{Now we show that $A_{\successor{N}}$ and $B_{\successor{N}}$ are indeed unique.}%
	% A_{N++},B_{N++} will be \mathcal_{A}_{N++},\mathcal{B}_{N++} within this group	
	\begingroup
	\def\anpp{{\cal A}_{\successor{N}}}%
	\def\bnpp{{\cal B}_{\successor{N}}}%
	We show that, for all pairs of sets $\anpp,\bnpp$ that satisfy such conditions, we must have $\anpp = A_N \cup \{\successor{N}\}$, where $A_N$ is the unique set obtained from the inductive hypothesis.
	
	That is equivalent of saying, for all $n \in \setn$,
	\[
		n \in \anpp \hbox{ iff } n \in A_N \cup \{\successor{N}\}
	\]
	We induct on $n$.
	\begin{enumerate}
		\item \mybcbox When $n = 0$, by condition \ref{exer.3.5.12.2nd.cond.4}, $n \in A_N$ and $n \in \anpp$. Hence, both sides of the iff statement are true.
		
		\item \myisbox Suppose for some $n$, we already have $n \in \anpp$ iff $n \in A_N \cup \{\successor{N}\}$, a unique set, thanks to the union axiom. Because we already have $A_N,B_N$ satisfying the conditions, we have three situations, and at least and only one of them is true at a time:
		\begin{enumerate}
			\item $n \in A_N$. By inductive hypothesis, $n \in \anpp$. By condition \ref{exer.3.5.12.2nd.cond.2} and \ref{exer.3.5.12.2nd.cond.5}, we have $n \ne \successor{N}$. Because the set $A_{\successor{N}}$ satisfies the condition \ref{exer.3.5.12.2nd.cond.7}, we thus have $\successor{n} \in \anpp$. 
			
			Hence, both sides of the iff for $\successor{n}$ are true.
			
			\item $n = \successor{N}$. By condition \ref{exer.3.5.12.2nd.cond.5}, we have $\successor{n} \in \bnpp$. By condition \ref{exer.3.5.12.2nd.cond.2}, we have $\successor{n} \notin \anpp$. 
			
			By our premise about $A_N,B_N$, we have $n \in B_N$. By condition \ref{exer.3.5.12.2nd.cond.6}, $\successor{n} \in B_N$. By condition \ref{exer.3.5.12.2nd.cond.2}, $\successor{n} \notin A_N$. Because $n = \successor{N}$, by Axiom 2.3 and~2.4, $\successor{n} \ne \successor{N}$, which means $\successor{n} \notin A_N \cup \{\successor{N}\}$.
			
			Hence, both sides of the iff for $\successor{n}$ are false. The iff statement is thus vacuously true.
			
			\item $n \in B_N \setminus \{\successor{N}\}$. By condition \ref{exer.3.5.12.2nd.cond.2}, we see that $n \notin A_N \cup \{\successor{N}\}$. By the inductive hypothesis, $n \notin \anpp$. By the conditions \ref{exer.3.5.12.2nd.cond.2} and \ref{exer.3.5.12.2nd.cond.3}, $n \in \bnpp$. By condition \ref{exer.3.5.12.2nd.cond.6}, we then have $\successor{n} \in \bnpp$, and $\successor{n} \notin \anpp$ follows from condition \ref{exer.3.5.12.2nd.cond.2}.
			
			We need to show that $\successor{n} \notin A_N \cup \{\successor{N}\}$. Because $n \in B_N$ and condition \ref{exer.3.5.12.2nd.cond.6}, we have $\successor{n} \in B_N$. Hence $\successor{n} \notin A_N$.
			
			Now we only need to show that $\successor{n} \ne \successor{N}$. Suppose for the sake of contradiction that they equal to each other, then by Axiom~2.4 we have $n = N$. Hence, $n \in \anpp$ by condition \ref{exer.3.5.12.2nd.cond.7}. However, we just showed that $a \notin \anpp$ in the last paragraph, a contradiction.
			
			Therefore, both sides of the iff for $\successor{n}$ are false. The iff statement is thus vacuously true.
		\end{enumerate}
	\end{enumerate}

	Now we know that $A_{\successor{N}}$ is unique, thanks to the pairwise union axiom. By \exerciseref{3.1.9}, all the sets $\bnpp$ must satisfy $\bnpp = \setn \setminus A_{\successor{N}}$. Thanks to the axiom of specification, this means that $B_{\successor{N}}$ is also unique.
	\endgroup
	
	We can now close the induction to conclude that for all $N$, there exists unique sets $A_N,B_N$, which satisfy the conditions \ref{exer.3.5.12.2nd.cond.1}--\ref{exer.3.5.12.2nd.cond.7}.
\end{proof}

In fact, if we had the order, we would see that $A_N = \{n \in \setn : n \le N\}$ and $B_N = \setn \setminus A_N$. But we cannot have the order.

Recall how we defined $A_{\successor{N}}$ and $B_{\successor{N}}$ in the proof of the existence? The equation \eqref{eq.3.5.12.relation.an.bn}. Now we know that they are unique, so the following corollary is true: 
\begin{coro}\label{my.coro.3.5.12.an.bn}
	For all $N \in \setn$, \eqref{eq.3.5.12.relation.an.bn} is true.
\end{coro}

Now we are ready to define the partial functions $a_N$ again, but this time without any circularity. In the first proof for the existence of unique partial functions $a_N$,
\begin{enumerate}
	\item Replace every $\{0\}$ with $A_0$. Actually, we can skip this.
	\item Replace every $n \le N$ with $n \in A_N$. Or, in the context of $A_{\successor{N}}$, we may instead replace it with $n \in A_{\successor{N}}\setminus \{\successor{N}\}$. But the two replacements are the same, thanks to My Corollary~\ref{my.coro.3.5.12.an.bn}.
	\item Replace every $n < N$ with $n \in A_N \setminus \{N\}$.
	\item Replace every $n > N$ with $n \in B_N$.
\end{enumerate}
After the replacements, wherever we use the trichotomy of the order to conclude $n$ either $\le N$ or $>N$ (we used it implicitly), we can instead use the conditions $A_N \cap B_N = \emptyset$ and $A_N \cup B_N = \setn$ (and \exerciseref{3.1.9}).

\begin{proof}
	We will see that, after these replacements, all places in the first proof where addition and ordered are depended are removed. Hence, the proof will become valid again for this exercise.
\end{proof}

This exercise has formalised all things that depend on the recursive definition theorem, in particular, addition, and in particular, the statement, My Proposition~\ref{my.prop.natural.number.ne}, that the natural numbers are distinct.

\begin{exercise}{3.5.13}
	Suppose there exists an alternative $0'$, an alternative increment: $\successor{}'$, such that the numbers we obtained from the two obey the Axioms 2.1--2.5.
	
	According to the axiom of infinity, we have an alternative set: $\setn'$. Show that there exists a bijection $a: \setn \to \setn'$ such that $a(0) = 0'$, and $a(n) = n'$ iff $a(\successor{n}) = \successor{n'}'$.
\end{exercise}
\begin{proof}
Define $f: \setn \times \setn' : \setn'$ as follows: for all $n \in \setn, n' \in \setn'$, we have $f(n,n') := \successor{n'}'$.

Because of Axiom 2.4, this definition of $f$ satisfies the vertical line test: if two function values $f(a,n') \ne f(b,m')$, where $a,b$ are any elements in $\setn$, then we must have $n' \ne m'$, and thus the two input values $(a,n') \ne (b,m')$. Hence, $f$ is a function.

Because $0'$ is an element in $\setn'$, according to \exerciseref{3.5.12}, we have a unique function $a: \setn \to \setn'$ such that $a(0) = 0'$, and $a(\successor{n}) = f(n,a(n))$ for all $n \in \setn$. Expand $f(n,a(n))$, we have $a(\successor{n}) = \successor{(a(n))}'$.

Now we show that $a$ is the function that we want. 
\begin{enumerate}
	\item First, by definition, $a(0) = 0'$. 
	
	\item Now we show that $a(n) = n'$ iff $a(\successor{n}) = \successor{n'}'$. 
	
	\myifbox Suppose $a(\successor{n}) = \successor{n'}'$. We expand $a(\successor{n})$ by the definition of $a$, to get
	\[
	a(\successor{n}) = \successor{(a(n))}'
	\]
	Using our hypothesis, we have $\successor{n'}' = \successor{(a(n))}'$. By Axiom 2.4, we have $n' = a(n)$, as desired.
	
	\myoifbox Suppose $a(n) = n'$. We expand $a(\successor{n})$ by the definition of $a$, to get
	\[
	a(\successor{n}) = \successor{(a(n))}'
	\]
	Substitute $a(n) = n'$ in, we have $a(\successor{n}) = \successor{n'}'$, as desired.
	
	\item Finally, we show that $a$ is a bijection.
	
	\fbox{\em Injectivity.} Let $m,n$ be any two elements in $\setn$. Suppose $a(m) \ne a(n)$. We consider $a(\successor{m})$ and $a(\successor{n})$. 
	
	By the property of $a$, we have $a(\successor{m}) = \successor{(a(m))}'$ and $a(\successor{n}) = \successor{(a(n))}'$. Because $a(m) \ne a(n)$, by Axiom 2.4, we have $a(\successor{m}) \ne a(\successor{n})$. 
	
	This gives us a nice property: Whenever $a(m) \ne a(n)$, we have $a(\successor{m}) \ne a(\successor{n})$. We now consider using induction on $m \in \setn$, for this statement of injectivity:
	\[
		m \ne n \to a(m) \ne a(n) \hbox{ for all } n \in \setn
	\]
	
	\begin{enumerate}
		\item \mybcbox In this case, $m = 0$. we need to show that $0 \ne n \to a(0) \ne a(n)$. According Lemma~2.2.10, since $n \ne 0$, we have some $b \in \setn$ such that $\successor{b} = n$.
		
		Observer the value $a(n) = a(\successor{b}) = \successor{a(b)}'$. Because, by definition, $a(0) = 0'$, we cannot have $\successor{a(b)}' = a(0)$, thanks to Axiom~2.3. Therefore, $a(0) \ne a(n)$.
		
		\item \myisbox Suppose that the statement is true for some $m \in \setn$. We need to show that this is true:
		\[
			\successor{m} \ne n \to a(\successor{m}) \ne a(n) \hbox{ for all } n \in \setn
		\]
		We have two situations:
		\begin{enumerate}
			\item When $n = 0$, $a(n) = 0'$. But $a(\successor{m}) = \successor{(a(m))}' \ne 0'$, by Axiom~2.3, as desired.
			
			\item When $n \ne 0$, by Lemma~2.2.10, we have $c \in \setn$ such that $\successor{c} = n$.
			Therefore, we have $\successor{m} \ne \successor{c}$. This implies $m \ne c$. (If $m = c$, then $\successor{m} = \successor{c}$, by the axiom of substitution.) By our inductive hypothesis, this implies $a(m) \ne a(c)$.
			
			By the nice property we just proved, from $a(m) \ne a(c)$ we can have $a(\successor{m}) \ne a(\successor{c})$, that is, $a(\successor{m}) \ne a(n)$, as desired.
		\end{enumerate}
	\end{enumerate}

	We can now close the induction.

	\fbox{\em Surjectivity.} Let $n'$ be any element in $\setn'$. We show that there exists some element $n \in \setn$ such that $a(n) = n'$.
	
	We induct on $n'$, since the alternative natural number set also satisfies Axiom~2.5.
	\begin{enumerate}
		\item \mybcbox When $n' = 0'$, we set $n = 0$, and $a(0) = 0'$, by definition.
		
		\item \myisbox Suppose the statement is true for some $n' \in \setn'$, then there exists a $n \in \setn$ such that $a(n) = n'$. 
		
		Consider $a(\successor{n})$. By definition it equals to $\successor{a(n)}'$, which equals $\successor{n'}'$, by the inductive hypothesis.
	\end{enumerate}

	We can now close the induction.
\end{enumerate}

	Therefore, we showed the existence of such a function $a: \setn \to \setn'$ having the properties, and showed that it is a bijection.
\end{proof}

\section{Cardinality of Sets}
\begin{why}{58}
	The map $f: \setn \to Y,\ n \mapsto 2n$, where $Y$ is the set of even natural numbers, is a bijection.
\end{why}
\begin{proof}
	By the definition of even numbers, we see that $f$ is clearly surjective. 
	
	Now we show that it is injective. Consider $f(m) = 2m$ and $f(n) = 2n$ for all $m,n$. If $f(m) = f(n)$, then we must have $m = n$, by the cancellation law of multiplication (Corollary~2.3.7).
\end{proof}

\begin{exercise}{3.6.1}
	Having the same cardinality is an equivalent relation. That is,
	\begin{enumerate}
		\item \fbox{\em Reflexivity} $X$ has the same cardinality as $X$.
		\item \fbox{\em Symmetry} If $X$ has the same cardinality as $Y$, then $Y$ has the same cardinality as $X$.
		\item \fbox{\em Transitivity} If If $X$ has the same cardinality as $Y$, and if $Y$ has the same cardinality as $Z$, then $X$ has the same cardinality as $Z$.
	\end{enumerate}
\end{exercise}
\begin{proof}\leavevmode
	\begin{enumerate}
		\item $f: x \mapsto x$ is clearly bijective.
		\item Denote $f: X \to Y$ as the bijection promised by the premise. By \exerciseref{3.3.6}, $f^{-1}$ is also bijection, and it's from $Y$ to $X$, as desired.
		\item Denote $f: X \to Y$, $g: Y \to Z$ as the bijections promised by the premise. By \exerciseref{3.3.2}, $g \circ f$ is also bijective.
	\end{enumerate}
\end{proof}

\begin{why}{59}
	The set $M := \{i \in \setn : 1 \le i \le n\}$ and the set $N := \{i \in \setn : (0 \le)\, i < n\}$ have the same cardinality.
\end{why}
\begin{proof}
	Consider $f: M \to N,\ i \mapsto \successor{i}$. 
	
	By the property of the order, Proposition~2.2.12 (e), we know that $\successor{0} \le \successor{i}$ iff $0 < \successor{i}$, and thus iff $0 \le i$. Using the same property, we have $i < n$ iff $\successor{i} \le n$. 
	
	Therefore, $0 \le i < n$ iff $1 \le \successor{i} \le n$. $f$ is thus a surjection. By Axiom~2.4, $f$ is additionally an injection. 
\end{proof}

After showing that $M$ has the same cardinality as $N$, we may in general show that they have the same cardinality as $\{i \in \setn : 1+m \le i \le n+m\}$, by inductively applying the function $\successor{}$ and using Proposition~2.2.12 (d).

\begin{why}{59}
	There is no bijection from the empty set to any non-empty set.
\end{why}
\begin{proof}
	This is because such a function can never be surjective, although by \exerciseref{3.3.3} it is always injective.
\end{proof}

\begin{exercise}{3.6.2}
	$X$ has the cardinality 0 iff $X = \emptyset$.
\end{exercise}
\begin{proof}
\myifbox Suppose $X$ is empty, then we know that the empty function whose range is also empty is bijective, according to \exerciseref{3.3.3}. Hence, its cardinality is $0$. 

\myoifbox Suppose $\# X = 0$, then there exists a bijection 
$f: \emptyset \to X$, which is not surjective, unless $X = \emptyset$, by \exerciseref{3.3.3}.
\end{proof}

\begin{exercise}{3.6.3}
	Let $n$ be any natural number, and $f$ be any function from $S_n := \{i \in \setn: 1 \le i \le n\}$ to $\setn$.
	
	Then, $f(S_n)$ is bounded. That is, there exists a natural number $M$ such that $f(i) \le M$ for all $i \in S_n$.
	
	Also, give a proof to Theorem~3.6.12 using this exercise, without using Lemma~3.6.9.
\end{exercise}
\begin{proof}
We induct on $n$.
	
\mybcbox When $n = 0$, this is vacuously true.

\myisbox Suppose that the statement for some $n$ is true. 

Let $f$ be a function from $S_{\successor{n}}$ to $\setn$. Thus, by the inductive hypothesis, $f(i) \le M$ for all $i \le n$, for some $M$.

By the trichotomy of the order, $f(\successor{n})$ either is less than or equal to $M$, or is bigger than $M$. In the former case, set $M_{\successor{}} := M$, and in the latter case set $M_{\successor{}} := f(\successor{n})$. 

Therefore, in all cases $f(i) \le M_{\successor{}}$, for all $i \le \successor{n}$. We can now close the induction.
\end{proof}

Now we give an alternative proof to Theorem~3.6.12 using \exerciseref{3.6.2}.
\begin{proof}
	Suppose for the sake of contradiction that $\#\setn = n$ for some $n$. Then, there is a bijection $f$ from $\{1 \le i \le n\}$ to $\setn$.
	
	By \exerciseref{3.6.2}, we have $f(i) \le M$ for all $i \le n$. However, by Axiom~2.5, there exists $\successor{M} \in \setn$, which is greater than $M$. Therefore, $f$ is not surjective, a contradiction.
\end{proof}

\begin{exercise}{3.6.4}
	Prove proposition~3.6.14.
\end{exercise}
\begin{proof}\leavevmode

(a) 
	Let $n := \#X$. Let $f$ be a bijection from $\{1 \le i \le n\}$ to $X$. Define $g: \{1 \le i \le n+1\} \to X \cup \{x\}$ as 
	\[
		g(i) = 
		\begin{cases}
			f(i) &i \le n\\
			x &i = \successor{n}
		\end{cases}
	\]
	Because $f$ is bijective and $x \notin X$, we see that this definition of $g$ gives another bijection.
	\vskip\baselineskip
	
(b)
	Let $m := \#X$ and $n := \#Y$. We use induction on $m$.
	
	\mybcbox Theoretically, proving when $m = 0$ suffices. However, we will also prove when $m = 1$, as it will be used in the inductive step.
	
	When $m = 0$, $X = \emptyset$. Then, $X \cup Y = Y$, which is finite, and its cardinality $\le \#Y$.
	
	When $m = 1$, $X = \{x\}$ for some object $x$. We have two situations.
	\begin{enumerate}
		\item If $x \in Y$, then $X \cup Y = Y$, which is finite, and its cardinality $\le \#Y$.
		\item If $x \notin Y$, then according to (a), $X \cup Y = Y \cup \{x\}$ is finite, and its cardinality equals to $n+1 \le \#\{x\} + \#Y$.
	\end{enumerate}

	\myisbox Suppose we have already proven it from all $m = M$, for some $M$. Now consider when $\#X = M+1$.
	
	We can pick any $x \in X$, and we have $X = \{x\} \cup (X \setminus \{x\})$. Thus,
	\[
		X \cup Y = \{x\} \cup (X \setminus \{x\}) \cup Y = \{x\} \cup \bigl((X \setminus \{x\}) \cup Y\bigr)
	\]
	
	By Lemma~3.6.9, $\#(X \setminus \{x\}) = \successor{M}-1 = M$. According to the inductive hypothesis, $\#\bigl((X \setminus \{x\}) \cup Y\bigr) \le \#(X \setminus \{x\}) + \#Y$. According to our base case where $m = 1$, we then have 
	\[
		\#\biggl[\{x\} \cup \bigl((X \setminus \{x\}) \cup Y\bigr)\biggr] \le \#\{x\} + \#\bigl((X \setminus \{x\}) \cup Y\bigr)
	\]
	And using the transitivity of the order, we have its cardinality $\le \#\{x\} + \#(X \setminus \{x\}) + \#Y$.
	
	Thus,
	\[
		\#\biggl[\{x\} \cup \bigl((X \setminus \{x\}) \cup Y\bigr)\biggr] \le 1+M+N
	\]
	, as desired.
	
	We can now close the induction.
	
	If $X \cap Y = \emptyset$, then we can follow the above induction procedure, just slightly modifying the base case when $m = 1$, and replace every $\le$ with $=$.
	\vskip\baselineskip
	
(c)
	 We induct on $\#X$.
	
	\mybcbox If $\#X = 0$, then its only subset is $\emptyset$, for which the statement is obviously true.
	
	\myisbox. Suppose for $\#X = n$ the statement is already true, then we consider when $\#X = \successor{n}$.
	
	Let $Y$ be any subset of $X$. We have two situations:
	\begin{enumerate}
		\item $Y = X$, for which case of course $Y$ is finite and $\#Y \le \#X$.
		\item $Y \ne X$, then there exists $x \in X$ such that $x \notin Y$. Thus, $Y$ is a subset of $X \setminus \{x\}$. By Lemma~3.6.9, $\#(X \setminus \{x\}) = \successor{n}-1 = n$. Then, we can use our inductive hypothesis on it to conclude that $Y$, as a subset of it, is finite, and
		\[
			\#Y \le \#(X \setminus \{x\}) = n \le \#X
		\]
	\end{enumerate}

	We can now close the induction.
	\vskip\baselineskip
	
(d)
	For any subset $S \subseteq X$, the property 
	\[
		Q(S) := f: S \to f(X) \hbox{ is a bijection}
	\]
	is either true or false.
	
	We can then use the axiom of specification on $2^Y$ to select such a set in which $Q$ is true. Let $S$ be any element in this specified set. Thus, $\#f(X) = \#S$.
	
	Because $S \in 2^X$, $S \subseteq X$. Thus, using (c), we see that $S$ is finite, and $\#S \le \#X$. Hence, $f(X)$ is finite and $\#f(X) \le \#X$.
	
	Now we suppose $f$ is injective. Note that $f: X \to f(X)$ is always surjective, so $X$ satisfies $Q$. Hence, we must have $\#f(X) = \#X$, as desired.
	\vskip\baselineskip

(e)
	We induct on $\#X$.
 	
 	\mybcbox When $\#X = 0$, we have $X = \emptyset$, and hence $X \times Y = \emptyset$, by \exerciseref{3.5.8}. Obviously, it is empty, and $\#(X \times Y) = 0 \times \#Y$.
 	
 	We also prove it when $\#X = 1$, for use in the inductive step. In this case, $X = \{x\}$, and we define a bijection $X \times Y \to Y$ by $(x,y) \mapsto Y$. Hence, we have $\#(X \times Y) = 1\times \#Y$, as desired.
 	
 	\myisbox Suppose it is already true for $\#X = n$, for some $n$. 
 	
 	Now consider when $\#X = n+1$. Because $n+1 \ne 0$, $X$ is non-empty. Therefore, we are able to select $x \in X$. And $X = \{x\} \cup (X \setminus \{x\})$. Therefore,
 	\[
 		X \times Y = \bigl[\{x\} \times Y\bigr] \cup \bigl[(X \setminus \{x\}) \times Y\bigr]
 	\]
 	, by \exerciseref{3.5.4}.
 	
 	Because $\{x\} \cap (X \setminus \{x\}) = \emptyset$, by (b) and our inductive hypothesis, we have $X \times Y$ being finite, and
 	\[
 		\#(X \times Y) = \#\bigl[\{x\} \times Y\bigr] + \#\bigl[(X \setminus \{x\}) \times Y\bigr]
 	\]
 	, which, by our inductive hypothesis and the base case when $n = 1$, equals
 	\[
 		\#Y + n \times \#Y = (n+1)\times \#Y
 	\]
 	, as desired.
 	\vskip\baselineskip
 	
(f)
	We induct on $\#X$.
	
	\mybcbox When $\#X = 0$, $X = \emptyset$. Thus, $Y^X$ contains all functions from $\emptyset$ to $Y$, which turns out to be only one function, according to Why~\ref{why.empty.func.is.unique}. Therefore, $\#Y^X = 1 = m^0$ for all $m = \#Y$, as desired.
	
	We also prove it when $\#X = 1$, for use in the inductive step. In this case, $X = \{x\}$, and define a bijection from $Y$ to $Y^X$ by $y \mapsto \{X,Y,(x,y)\}$, where $\{X,Y,(x,y)\}$ is the graph of some function from $X \to Y$. Thus, $\#(Y^X) = \#Y = (\#Y)^1$.
	
	\myisbox Suppose it's already true for $\#X = n$ for some $n$. Now consider when $\#X = n+1$.
	
	As $n+1 \ne 0$, $X$ is non-empty, and we can choose $x \in X$. Now we try to define a bijection from $Y \times Y^{X \setminus \{x\}}$ to $Y^X$.
	
	Because of \exerciseref{3.5.10}, we can treat $Y^{X \setminus \{x\}}$ as containing $\{X \setminus X, Y, G\}$, where $G$ is the graph of some function from $X \setminus \{x\}$ to $Y$.
	
	Hence, define the bijection this way:
	\[
		(y,\ \{X \setminus \{x\}, Y, G\})\ \mapsto\ \{X,Y,G \cup \{(x,y)\}\}
	\]
	Because $G$ satisfies the vertical line test and $x \notin X \setminus \{x\}$, we can say that $G \cup \{(x,y)\}$ also satisfies the test. Also, since $\{x\} \cup (X \setminus \{x\}) = X$, we see that $G \cup \{(x,y)\}$ is a graph for some function from $X$ to $Y$.
	
	To prove what we defined is surjective, let $H$ be the graph of any function from $X$ to $Y$. Hence, there exists a unique $(x,y) \in H$, for the $x$ we chose, because the vertical line test. $H \setminus \{(x,y)\}$ is then the $G$ in our definition, so our definition is surjective.
	
	To prove what we defined is injective, consider $(y,G) \ne (y',G')$. We have two situations,
	\begin{enumerate}
		\item If $y \ne y'$, then obviously $(G \cup \{(x,y)\}) \ne (G \cup \{(x,y')\})$.
		\item If instead $G \ne G'$, then also quite obviously $(G \cup \{(x,y)\}) \ne (G' \cup \{(x,y)\})$.
	\end{enumerate}

	Therefore, we have defined a bijection from $Y \times Y^{X \setminus \{x\}}$ to $Y^X$.
	
	By (a), $\#(X \setminus \{x\}) = n$. By our inductive hypothesis, $Y^{X \setminus \{x\}}$ is finite and $\#(Y^{X \setminus \{x\}}) = (\#Y)^n$. By (e), $Y \times Y^{X \setminus \{x\}}$ is thus finite, and
	\[
		\#(Y \times Y^{X \setminus \{x\}}) = \#Y \times (\#Y)^n = (\#Y)^{n+1}
	\]
	Because we have established a bijection from $Y^X$ to $Y \times Y^{X \setminus \{x\}}$, we see that the latter must also be finite and have the same cardinality, as desired.
\end{proof}

\declareexercise{3.6.5}
\begin{proof}
Let $f((x,y)):= (y,x), A\times B \rightarrow B \times A$. The bijectivity is obvious. 

Now we are using set theory to prove the commutativity of multiplication of natural number. For any 
natural number $m,n$, construct two sets: $M = \mathbb{N}_{m}, N = \mathbb{N}_{n}$. According to (e) in 
Proposition 3.6.14, we have that $\#(M \times N) = \#M \times \#N$. Then by what we have just proven, 
\[
\#(M \times N) = \#(N \times M) \Longrightarrow \#M \times \#N = \#N \times \#M \Longrightarrow mn = nm
\]
\end{proof}

\declareexercise{3.6.6}
\begin{proof}
Let $c \in C$, $f \in (A^B)^C$. Then $f(c)$ is a function $B\rightarrow A$. Let 
$b \in B, h \in A^{B\times C}$. Let
\[
g:A^{B\times C} \rightarrow (A^B)^{C}
\]
be such a function that for all $b,c$,
\[
g(h) = f \equiv h(b,c) = (f(c))\,(b)
\]
. Now we show that $g$ is bijective.

Injectivity: 
If $h \neq h'$, then $\exists b_0,c_0(h(b_0,c_0) \neq h'(b_0,c_0))$. Let $g(h) =f, g(h') = f'$. Then we 
know that $(f(c_0))\,(b_0) \neq (f'(c_0))\,(b_0)$, so $f(c_0) \neq f'(c_0) \Longrightarrow f \neq f'$. 
That means, $g(h) \neq g(h')$.

Surjectivity:
For any $f \in (A^B)^{C}$, let $h$ be such a function $\in A^{B\times C}$ that for all $b \in B,c \in C$, 
$h(b,c) := (f(c))\,(b)$. It is easy to see that $h$ is well-defined. So $g(h) = f$.

Note that by Proposition 3.6.14 we have $\#M^N = m^n$ and $\#(M \times N) = mn$, where $\#M =m, \#N =n$. 
Suppose that $\#A = a, \#B = b, \#C = c$, then
\[
\#(A^B)^C = (\#A^B)^{\#C} = (a^b)^c
\]
\[
\#A^{B\times C} = \#A^{\#(B \times C)} = a^{bc}
\]
So we have proven that $(a^b)^c = a^{bc}$.

Now we try to prove $a^b \times a^c = a^{b+c}$. Let $B,C$ be disjoint sets with the cardinality $b,c$ 
respectively. What we need to show is that
\[
\#(A^B \times A^C) = \#(A^{B \cup C}).
\]

Similarly, let 
\[
f: (A^{B \cup C}) \rightarrow (A^B \times A^C)
\]
be such a function that 
\[
f(g) = (u,v) \equiv \forall x(x \in B \Rightarrow g(x) = u(x) \wedge x \in C \Rightarrow g(x) = v(x)),
\]
where $g\in A^{B \cup C}, (u,v) \in A^B \times A^C$.

We can verify the bijectivity of $f$ nearly in the same way as way did previously. So I won't write it 
down here.

Then, we know $B \cap C = \emptyset \Rightarrow \#(B \cup C) = \#B + \#C$. So we can conclude that 
\[
a^b \times a^c = a^{b+c}
\]
\end{proof}

\declareexercise{3.6.7}
\begin{proof}
On one hand, if $\#A = a \leq \#B = b$, we show that $A$ has lesser or equal cardinalty to $B$. Let $f$ 
be a bijection from $A$ to $\mathbb{N}_{a}$, $g$ be a bijection from $B$ to $\mathbb{N}_b$. Let 
$\iota(x):=x, \mathbb{N}_{a} \rightarrow \mathbb{N}_b$. Then $g^{-1} \circ \iota \circ f$ is an injection 
from $A$ to $B$.

On the other hand, suppose that there is an injection $f$ from $A$ to $B$. We know that 
$f:A\rightarrow f(A)$ is bijective. So $\#A = \#f(A)$. Since $f(A) \subseteq B$, $\#f(A) \leq B$ (See (c) 
in Proposition 3.6.14). That is, $\#A \leq \#B$
\end{proof}

\declareexercise{3.6.8}
\begin{proof}
$f:A \rightarrow f(A)$ is bijective. So $f^{-1}: f(A) \rightarrow A$ is surjective. Let $g$ be defined as:
\begin{itemize}
\item $b \in f(A) \Longrightarrow g(b) = f^{-1}(b)$
\item $b \in B\setminus f(A) \Longrightarrow g(b)$ is any element of $A$.
\end{itemize}

Then $g$ is surjective.
\end{proof}

\declareexercise{3.6.9}
\begin{proof}
\begin{align*}
\#A + \#B 
&= \#(A - A \cap B) + \#(A \cap B) + \#(B - A \cap B) + \#(A \cap B) \\
&= (\#(A - A \cap B) + \#(A \cap B) + \#(B - A \cap B)) + \#(A \cap B) \\
&= \#(A \cup B) + \#(A \cap B)
\end{align*}
\end{proof}

\paragraph{Exercise 3.6.10} \label{exercise3.6.10}
\begin{proof}
Presume the negation:
\[
\forall i(i \in \{1,\dots,n\} \Longrightarrow \#(A_i) < 2)
\]

Use mathematical induction for (b) in Proposition 3.6.14, we can easily get:
\[
\#\bigcup_{i \in \{1,\dots,n\}}A_i \leq \sum_{i \in \{1,\dots,n\}} \#A_i
\]
We can also use mathematical induction to furthermore enhance what we proved while dealing with natural 
numbers to:
\[
\bigwedge_{i} a_{i} \leq b_{i} \Longrightarrow \sum_{i} a_{i} \leq \sum_{i} b_i
\].

Then because $\# A_i \leq 1$, so 
\[
\sum_{i \in \{1,\dots,n\}} A_i \leq (\sum_{i \in \{1,\dots,n\}} 1 = n)
\], 
which is impossible.
\end{proof}